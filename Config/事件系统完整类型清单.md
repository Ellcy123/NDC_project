# NDC事件系统 - 核心事件类型清单

## 📋 文档说明

本文档列出了NDC项目中核心使用的事件类型，包括主线流程和重要功能的触发机制。

版本: 2.1 (精简版)
保留类型: 22种（从27种精简）
删除类型: 5种（场景离开、指证选项解锁、疑点解答等）

---

## 🎯 事件类型总览（22种）

| 分类 | 事件类型数量 | 说明 |
|------|------------|------|
| 基础流程 | 6种 | 主线推进的核心事件 |
| 内容解锁 | 7种 | 解锁各种游戏内容 |
| 任务系统 | 4种 | 任务触发、更新、完成 |
| 特殊玩法 | 4种 | 谜题、分析、组合等 |
| UI交互 | 3种 | 提示、教学、成就 |

---

## 📦 详细事件类型列表

---

## 1️⃣ 基础流程类（6种）

### 1.1 循环开始 (LoopStart)

频率: 每循环1次 | 优先级: 100 | 打断: ✅ | Loop1: ✅

触发条件: 上一循环完成、开场AVG播放完毕
解锁内容: 本循环的第一个场景、主要任务、循环开场对话

---

### 1.2 场景进入 (SceneEnter)

频率: 频繁 | 优先级: 70 | 打断: ❌ | Loop1: ✅

触发条件: 玩家进入某个场景
解锁内容: 场景初始对话、场景任务、搜证提示

---

### 1.3 场景搜证完成 (SceneCleared)

频率: 中等 | 优先级: 75 | 打断: ❌ | Loop1: ✅

触发条件: 场景内所有可收集证据已收集
解锁内容: 下一个调查场景、新的行动目标、搜证完成提示

---

### 1.4 对话完成 (DialogueComplete)

频率: 频繁 | 优先级: 70 | 打断: ❌ | Loop1: ✅

触发条件: 某段对话播放完毕、玩家完成对话选择
解锁内容: 新场景、新证据、新任务、后续对话

---

### 1.5 对话分支选择 (DialogueChoice)

频率: 中等 | 优先级: 65 | 打断: ❌ | Loop1: ⚪

触发条件: 玩家在对话中做出选择
解锁内容: 不同的对话分支、影响NPC好感度、影响后续剧情走向

建议使用: 循环2+ Morrison质问策略

---

### 1.6 循环完成 (LoopComplete)

频率: 每循环1次 | 优先级: 100 | 打断: ✅ | Loop1: ✅

触发条件: 指证成功、循环目标任务完成
解锁内容: 下一个循环、循环结束对话、场景刷新

---

## 2️⃣ 内容解锁类（7种）

### 2.1 证据收集 (EvidenceCollect)

频率: 频繁 | 优先级: 70 | 打断: ❌ | Loop1: ✅

触发条件: 玩家收集到证据
解锁内容: 证据添加到背包、证据分析选项、相关任务更新

Loop1使用: 8次（EV111-EV115, EV121-EV122, EV133）

---

### 2.2 证据组合解锁 (EvidenceCombineUnlock)

频率: 低频 | 优先级: 60 | 打断: ❌ | Loop1: ⚪

触发条件: 收集到可组合的多个证据
解锁内容: 证据组合选项、新的证据分析结果、新的推理线索

建议使用: 循环2+ 氯仿毛巾+氯仿瓶

---

### 2.3 证词提取 (TestimonyExtract)

频率: 中等 | 优先级: 70 | 打断: ❌ | Loop1: ✅

触发条件: 对话中提取到关键证词
解锁内容: 证词添加到证据列表、相关疑点任务、可以用证词指证

Loop1使用: Tommy证词提取 → EV133

---

### 2.4 场景解锁 (SceneUnlock)

频率: 中等 | 优先级: 80 | 打断: ❌ | Loop1: ✅

触发条件: 完成特定条件
解锁内容: 新场景可访问、地图更新、解锁提示

Loop1使用: 5次（解锁SC102, SC103-SC106, SC107等）

---

### 2.5 NPC解锁 (NPCUnlock)

频率: 低频 | 优先级: 75 | 打断: ❌ | Loop1: ⚪

触发条件: 剧情推进、特定对话完成
解锁内容: NPC可对话、NPC新对话选项、NPC位置变化

建议使用: 循环3+ 隐藏NPC

---

### 2.6 对话选项解锁 (DialogueOptionUnlock)

频率: 中等 | 优先级: 65 | 打断: ❌ | Loop1: ⚪

触发条件: 收集到特定证据、获得特定信息
解锁内容: NPC新对话选项、可以质问NPC、可以出示证据

建议使用: 证据解锁质问选项

---

### 2.7 支线内容解锁 (SideContentUnlock)

频率: 低频 | 优先级: 50 | 打断: ❌ | Loop1: ⚪

触发条件: 完成特定支线条件、收集隐藏证据
解锁内容: 支线场景、支线对话、隐藏剧情

建议使用: 循环2+ Emma支线、Webb的秘密

---

## 3️⃣ 任务系统类（4种）

### 3.1 任务触发 (TaskTrigger)

频率: 中等 | 优先级: 75 | 打断: ❌ | Loop1: ✅

触发条件: 剧情推进、事件触发
解锁内容: 新任务添加到任务列表、任务目标显示、任务引导提示

Loop1使用: 多次（主任务、疑点任务等）

---

### 3.2 任务更新 (TaskUpdate)

频率: 频繁 | 优先级: 60 | 打断: ❌ | Loop1: ✅

触发条件: 任务进度变化、收集到证据、完成子任务
解锁内容: 任务进度更新、新的子任务、任务提示更新

Loop1使用: EVE_ALL_EVIDENCES_COLLECTED - 更新进度5/5

---

### 3.3 任务完成 (TaskComplete)

频率: 中等 | 优先级: 80 | 打断: ❌ | Loop1: ✅

触发条件: 完成任务目标
解锁内容: 任务标记完成、任务完成动效、奖励

Loop1使用: EVE_ROSA_EXPOSE_COMPLETE - 完成循环1任务

---

### 3.4 疑点触发 (DoubtTrigger)

频率: 中等 | 优先级: 70 | 打断: ❌ | Loop1: ✅

触发条件: 发现矛盾信息、收集到特殊证据、触发特定对话
解锁内容: 疑点添加到任务列表、疑点描述显示、疑点相关提示

Loop1使用: 多次疑点触发（TAS_LOOP001_DOUBT_01-04）

---

## 4️⃣ 特殊玩法类（4种）

### 4.1 谜题解开 (PuzzleSolved)

频率: 低频 | 优先级: 80 | 打断: ❌ | Loop1: ✅

触发条件: 输入正确密码、完成谜题机制
解锁内容: 隐藏证据、隐藏场景、特殊奖励

Loop1使用: EVE_SOLVE_TOOLBOX_PUZZLE - 工具箱密码0915

---

### 4.2 证据分析 (EvidenceAnalysis)

频率: 中等 | 优先级: 65 | 打断: ❌ | Loop1: ⚪

触发条件: 玩家分析证据
解锁内容: 证据新描述、证据隐藏信息、新的推理线索

建议使用: 循环2+ 证据深度分析玩法

---

### 4.3 证据组合 (EvidenceCombine)

频率: 低频 | 优先级: 70 | 打断: ❌ | Loop1: ⚪

触发条件: 玩家组合两个证据
解锁内容: 新的组合证据、新的推理结论、指证新选项

建议使用: 循环2+ EV114+EV121组合

---

### 4.4 指证成功 (ExposeSuccess)

频率: 低频 | 优先级: 95 | 打断: ✅ | Loop1: ✅

触发条件: 玩家用正确证据指证、三轮指证全部完成
解锁内容: 指证结果对话、下一轮指证、循环完成

Loop1使用: 4次（Round1/2/3成功 + Rosa指证完成）

---

## 5️⃣ UI交互类（3种）

### 5.1 教学提示 (TutorialTrigger)

频率: 低频 | 优先级: 90 | 打断: ⚠️ | Loop1: ⚪

触发条件: 首次进入某个功能、首次使用某个系统
解锁内容: 教学对话、操作提示、UI高亮引导

建议使用: 游戏开始时新手引导

---

### 5.2 成就解锁 (AchievementUnlock)

频率: 低频 | 优先级: 50 | 打断: ❌ | Loop1: ⚪

触发条件: 完成特定条件、收集全部证据、完成隐藏内容
解锁内容: 成就提示、成就奖励、成就徽章

建议成就: "真相的开端"（完成循环1）、"完美指证"（三轮一次通过）、"证据收藏家"（收集全部）

---

### 5.3 系统提示 (SystemNotification)

频率: 频繁 | 优先级: 40 | 打断: ❌ | Loop1: ⚪

触发条件: 任何需要提示的时机
解锁内容: 屏幕提示文本、UI通知、音效反馈

建议使用: 各个关键节点

---

## 📊 事件类型统计总表

| 序号 | 事件类型 | 英文名 | 频率 | 打断 | 优先级 | Loop1 |
|-----|---------|--------|-----|------|--------|-------|
| 基础流程类 ||||||
| 1 | 循环开始 | LoopStart | 每循环1次 | ✅ | 100 | ✅ |
| 2 | 场景进入 | SceneEnter | 频繁 | ❌ | 70 | ✅ |
| 3 | 场景搜证完成 | SceneCleared | 中等 | ❌ | 75 | ✅ |
| 4 | 对话完成 | DialogueComplete | 频繁 | ❌ | 70 | ✅ |
| 5 | 对话分支选择 | DialogueChoice | 中等 | ❌ | 65 | ⚪ |
| 6 | 循环完成 | LoopComplete | 每循环1次 | ✅ | 100 | ✅ |
| 内容解锁类 ||||||
| 7 | 证据收集 | EvidenceCollect | 频繁 | ❌ | 70 | ✅ |
| 8 | 证据组合解锁 | EvidenceCombineUnlock | 低频 | ❌ | 60 | ⚪ |
| 9 | 证词提取 | TestimonyExtract | 中等 | ❌ | 70 | ✅ |
| 10 | 场景解锁 | SceneUnlock | 中等 | ❌ | 80 | ✅ |
| 11 | NPC解锁 | NPCUnlock | 低频 | ❌ | 75 | ⚪ |
| 12 | 对话选项解锁 | DialogueOptionUnlock | 中等 | ❌ | 65 | ⚪ |
| 13 | 支线内容解锁 | SideContentUnlock | 低频 | ❌ | 50 | ⚪ |
| 任务系统类 ||||||
| 14 | 任务触发 | TaskTrigger | 中等 | ❌ | 75 | ✅ |
| 15 | 任务更新 | TaskUpdate | 频繁 | ❌ | 60 | ✅ |
| 16 | 任务完成 | TaskComplete | 中等 | ❌ | 80 | ✅ |
| 17 | 疑点触发 | DoubtTrigger | 中等 | ❌ | 70 | ✅ |
| 特殊玩法类 ||||||
| 18 | 谜题解开 | PuzzleSolved | 低频 | ❌ | 80 | ✅ |
| 19 | 证据分析 | EvidenceAnalysis | 中等 | ❌ | 65 | ⚪ |
| 20 | 证据组合 | EvidenceCombine | 低频 | ❌ | 70 | ⚪ |
| 21 | 指证成功 | ExposeSuccess | 低频 | ✅ | 95 | ✅ |
| UI交互类 ||||||
| 22 | 教学提示 | TutorialTrigger | 低频 | ⚠️ | 90 | ⚪ |
| 23 | 成就解锁 | AchievementUnlock | 低频 | ❌ | 50 | ⚪ |
| 24 | 系统提示 | SystemNotification | 频繁 | ❌ | 40 | ⚪ |

符号: ✅已使用 | ⚪未使用 | ⚠️可选

---

## 🗑️ 已删除的事件类型（5种）

| 事件类型 | 英文名 | 删除原因 |
|---------|--------|----------|
| 场景离开 | SceneLeave | Loop1未使用，优先级较低 |
| 指证选项解锁 | ExposeUnlock | 可合并到"任务更新"事件中 |
| 疑点解答 | DoubtSolved | 可合并到"任务完成"或"指证成功"中 |

说明: 这些类型仍可在代码层实现，只是不作为独立事件类型配置

---

## 🔗 典型事件链条

### 链条1：证据收集 → 任务更新 → 指证成功

```
证据收集 → 任务更新(3/5) → 证据收集 → 任务更新(5/5) → 指证成功
```

### 链条2：对话 → 疑点 → 指证解答

```
对话完成 → 疑点触发 → 证据收集 → 指证成功 → 任务完成
```

### 链条3：支线任务完整流程

```
对话分支选择 → 支线内容解锁 → 任务触发 → 场景解锁 → 证据收集 → 对话完成 → 任务完成 → 成就解锁
```

---

## 💡 Loop 1 使用情况

### 已使用（12种）

| 事件类型 | 使用次数 | 具体事件 |
|---------|---------|---------|
| 循环开始 | 1 | EVE_LOOP001_START |
| 场景进入 | 1 | EVE_ENTER_SC102 |
| 场景搜证完成 | 2 | SC103/SC104搜证完成 |
| 对话完成 | 2 | Emma/Tommy对话 |
| 证据收集 | 8 | EV111-115, EV121-122, EV133 |
| 场景解锁 | 3 | 解锁SC102, SC103-106, SC107等 |
| 证词提取 | 1 | Tommy证词 |
| 任务触发 | 多次 | 主任务、疑点任务 |
| 任务更新 | 1 | 全证据收集完成 |
| 任务完成 | 1 | Rosa指证完成 |
| 谜题解开 | 1 | 工具箱密码 |
| 指证成功 | 4 | Round1/2/3 + 完成 |
| 循环完成 | 1 | 循环1→循环2 |

总计: 20个事件，12种类型，覆盖率54%

---

### 未使用但建议添加（10种）

| 事件类型 | 建议场景 | 优先级 |
|---------|---------|--------|
| 对话分支选择 | 循环2+ Morrison质问策略 | 高 |
| 证据组合解锁 | 循环2+ 氯仿毛巾+氯仿瓶 | 高 |
| 证据组合 | 循环2+ 多证据推理 | 高 |
| 支线内容解锁 | 循环2+ Emma支线 | 中 |
| NPC解锁 | 循环3+ 隐藏NPC | 中 |
| 对话选项解锁 | 证据解锁质问选项 | 中 |
| 证据分析 | 证据深度分析玩法 | 中 |
| 教学提示 | 游戏开始新手引导 | 中 |
| 成就解锁 | 循环1完成成就 | 低 |
| 系统提示 | 各种UI提示 | 低 |

---

## 🎯 后续循环建议

### 重点添加的事件类型

#### 1. 对话分支选择（高优先级）
- 用途: 指证Morrison时不同质问策略
- 影响: Morrison反应和后续剧情
- 示例: 强硬质问 vs 怀柔策略

#### 2. 证据组合（高优先级）
- 用途: 多个证据组合推理新结论
- 示例: 医疗账单 + Rosa证词 = Morrison威胁动机
- 增加: 推理深度和策略性

#### 3. 支线内容解锁（中优先级）
- 用途: Emma调查线、Webb的秘密
- 增加: 游戏深度和可玩性
- 奖励: 隐藏证据、特殊对话、成就

#### 4. 成就解锁（低优先级）
- 示例成就:
  - "真相的开端": 完成循环1
  - "完美指证": 三轮指证全部一次通过
  - "证据收藏家": 收集所有隐藏证据
  - "真相大师": 完成所有循环

---

## ✅ 总结

### 当前状态（Loop 1）
- 保留类型: 22种
- 已使用类型: 12种
- 事件总数: 20个
- 覆盖率: 54%

### 完整游戏建议
- 应实现类型: 至少18种
- 覆盖率目标: 80%以上
- 重点添加: 对话分支、证据组合、支线内容

### 优先级建议

高优先级（必须有）:
- 基础流程类（6种）✅
- 内容解锁类核心（4种）✅
- 任务系统类（4种）✅
- 指证成功（1种）✅

中优先级（增强体验）:
- 对话分支选择
- 证据组合
- 支线内容解锁
- 教学提示

低优先级（锦上添花）:
- 成就解锁
- 证据分析
- 系统提示

---

创建日期: 2025-11-23
版本: 2.1（精简版）
总计事件类型: 22种
