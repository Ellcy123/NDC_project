# NDC事件系统 - 配置清单

## 文档说明

本文档为NDC项目的事件系统配置手册，包含：
- 第一循环开发清单（前期开发优先级高）
- 触发条件类型清单（策划配置用）
- 解锁内容类型清单（策划配置用）
- 代码实现要点（程序员参考用）

版本: 1.1
创建日期: 2025-11-24
适用范围: 全章节通用

---

## 第一循环开发清单（优先级：高）

本章节列出循环1必须实现的功能，供前期开发使用。

### 1. 循环1核心流程

循环名称: Rosa现场目击指证
核心目标: 到底是谁把我迷晕了，还想把杀人的罪名扣在我头上？
核心谎言: Rosa声称"我一直在地下室酒窖工作，什么都没看到"

### 2. 循环1场景清单

| 场景ID | 场景名称 | 功能 | 优先级 |
|-------|---------|------|--------|
| SC102 | 歌舞厅外街道 | 循环1起点，与Emma对话 | P0 |
| SC103 | 储藏室 | 证据收集主场景，谜题解开 | P0 |
| SC104 | 后台走廊 | 证据收集场景 | P0 |
| SC105 | Tommy办公室 | NPC对话场景 | P0 |
| SC106 | 酒吧大堂 | 指证Rosa场景 | P0 |

### 3. 循环1证据清单

| 证据ID | 证据名称 | 所在场景 | 获取方式 | 优先级 |
|-------|---------|---------|---------|--------|
| EV111 | 芝加哥警局通缉令 | SC103储藏室 | 直接拾取 | P2 |
| EV112 | Rosa的女儿照片 | SC103储藏室 | 直接拾取 | P1 |
| EV113 | Rosa的医院就诊清单 | SC103储藏室 | 直接拾取 | P2 |
| EV114 | 沾有氯仿的毛巾 | SC103储藏室 | 谜题解锁 | P0 |
| EV115 | 工作记录卡 | SC103储藏室 | 谜题解锁 | P0 |
| EV121 | 氯仿瓶 | SC104走廊 | 直接拾取 | P0 |
| EV122 | 地板拖拽痕迹 | SC104走廊 | 直接拾取 | P0 |
| EV133 | Tommy时间证词 | SC105办公室 | 对话提取 | P1 |

优先级说明:
- P0: 核心指证证据，必须实现
- P1: 剧情重要证据，建议实现
- P2: 环境叙事证据，可后期补充

### 4. 循环1触发条件类型

循环1实际使用的触发条件类型（共8种）:

| 序号 | 触发条件类型 | 命名格式 | 示例 | 配置位置 |
|-----|------------|---------|------|---------|
| 1 | 开场AVG完成 | 固定字符串 | OPENING_AVG_COMPLETE | 剧本流程 |
| 2 | 场景进入 | SCENE_{场景ID}_ENTER | SCENE_SC102_ENTER | 场景表 onEnter字段 |
| 3 | 对话完成 | DIALOGUE_{对话ID}_COMPLETE | DIALOGUE_D045_COMPLETE | 对话表 onComplete字段 |
| 4 | 证据收集 | {证据ID}_COLLECTED | EV115_COLLECTED | 证据表 onCollected字段 |
| 5 | 谜题解开 | PUZZLE_{谜题ID}_SOLVED | PUZZLE_TOOLBOX_SOLVED | 谜题表 onSolved字段 |
| 6 | 多条件AND | 用逗号分隔多个条件 | EV115_COLLECTED,EV114_COLLECTED | 事件表 triggerCondition字段 |
| 7 | 指证成功 | EXPOSE_{NPC名}_ROUND{N}_SUCCESS | EXPOSE_ROSA_ROUND1_SUCCESS | 指证表 onSuccess字段 |
| 8 | 循环完成 | LOOP{编号}_COMPLETE | LOOP001_COMPLETE | 循环表 onComplete字段 |

### 5. 循环1解锁内容类型

循环1实际使用的解锁内容类型（共8种）:

| 序号 | 解锁类型 | 字段名 | 数据类型 | 示例 |
|-----|---------|--------|---------|------|
| 1 | 解锁场景 | unlockContent.scenes | 数组 | ["SC103", "SC104"] |
| 2 | 解锁对话 | unlockContent.dialogues | 数组 | ["D_ROSA_ROUND1"] |
| 3 | 解锁任务 | unlockContent.tasks | 数组 | ["TAS_LOOP001_GOAL_03"] |
| 4 | 解锁提示 | unlockContent.hints | 数组 | ["密码提示：女儿的生日0915"] |
| 5 | 解锁循环 | unlockContent.loops | 数组 | ["LOOP002"] |
| 6 | 完成任务 | specialEffects.completeTask | 字符串 | "TAS_LOOP001_PHASE" |
| 7 | 高亮任务 | specialEffects.highlightTask | 字符串 | "TAS_LOOP001_PHASE" |
| 8 | 更新进度 | specialEffects.updateProgress | 对象 | {taskId, current:5, total:5} |

### 6. 循环1关键事件清单

按流程顺序列出必须实现的关键事件:

| 事件ID | 事件名称 | 触发条件 | 解锁内容 | 优先级 |
|-------|---------|---------|---------|--------|
| EVE_LOOP001_START | 循环1开始 | OPENING_AVG_COMPLETE | 解锁SC102场景 | P0 |
| EVE_ENTER_SC102 | 进入街道场景 | SCENE_SC102_ENTER | 触发Emma对话 | P0 |
| EVE_EMMA_TALK_COMPLETE | Emma对话完成 | DIALOGUE_D045_COMPLETE | 解锁SC103-SC106调查场景 | P0 |
| EVE_COLLECT_EV112 | 收集女儿照片 | EV112_COLLECTED | 显示密码提示 | P1 |
| EVE_SOLVE_TOOLBOX_PUZZLE | 解开工具箱密码 | PUZZLE_TOOLBOX_SOLVED | 解锁EV114+EV115核心证据 | P0 |
| EVE_ALL_EVIDENCES_COLLECTED | 全部证据收集完成 | 5个证据都收集 | 高亮任务，提示可指证 | P0 |
| EVE_ROSA_EXPOSE_ROUND1_SUCCESS | 第一轮指证成功 | EXPOSE_ROSA_ROUND1_SUCCESS | 触发第二轮指证 | P0 |
| EVE_ROSA_EXPOSE_ROUND2_SUCCESS | 第二轮指证成功 | EXPOSE_ROSA_ROUND2_SUCCESS | 触发第三轮指证 | P0 |
| EVE_ROSA_EXPOSE_ROUND3_SUCCESS | 第三轮指证成功 | EXPOSE_ROSA_ROUND3_SUCCESS | Rosa供出真相 | P0 |
| EVE_ROSA_EXPOSE_COMPLETE | Rosa指证完成 | LOOP001_COMPLETE | 完成循环1任务 | P0 |
| EVE_LOOP001_TO_LOOP002 | 循环1过渡 | LOOP001_COMPLETE | 解锁循环2 | P0 |

总计: 11个P0关键事件，1个P1事件

### 7. 循环1谜题清单

| 谜题ID | 谜题名称 | 谜题类型 | 密码答案 | 提示来源 | 优先级 |
|-------|---------|---------|---------|---------|--------|
| PUZZLE_TOOLBOX | 储藏室工具箱密码 | 4位数字密码 | 0915 | EV112女儿照片背面生日 | P0 |

### 8. 循环1三轮指证清单

| 轮次 | 指证目标 | 使用证据 | Rosa的谎言 | Zack的反驳 | 结果 |
|-----|---------|---------|-----------|-----------|------|
| 第一轮 | 否定地点谎言 | EV115工作记录卡 | 我在地下室酒窖工作 | 工作记录卡显示你在后台走廊 | Rosa承认地点说谎 |
| 第二轮 | 否定目击谎言 | EV114氯仿毛巾 + EV121氯仿瓶 | 我在后台专心清洁，什么都没看到 | 毛巾有氯仿残留，是医用麻醉剂 | Rosa承认使用氯仿迷晕Zack |
| 第三轮 | 否定自认，揭露真相 | EV122拖拽痕迹 | 是我把您拖到办公室的 | 拖拽需要150磅力量，你体重不到120磅 | Rosa供出Morrison是幕后黑手 |

### 9. 循环1程序开发优先级

必须实现（P0）:
- EventManager事件管理系统
- GameState状态管理系统
- 证据收集功能（8个证据）
- 场景解锁功能（5个场景）
- 谜题系统（1个密码谜题）
- 指证系统（3轮指证）
- 任务系统（任务解锁、更新、完成）
- 多条件触发功能（AND逻辑）

建议实现（P1）:
- 证据分析界面
- 任务高亮提示
- 谜题提示系统
- 对话提取证词功能

可后期补充（P2）:
- 环境叙事证据的详细交互
- 成就解锁系统
- 证据组合功能

### 10. 循环1配置文件清单

| 文件名 | 说明 | 路径 |
|-------|------|------|
| EventConfig_Episode1_Loop1.json | 循环1事件配置 | Config/ |
| EventConfig_Episode1_Loop1.xlsx | 循环1事件配置（Excel） | Config/ |
| TaskConfig_Episode1_Loop1_Example.json | 循环1任务配置 | Config/ |
| EventConfig_Episode1_Loop1_说明.md | 循环1详细说明文档 | Config/ |

---

## 第一部分：触发条件类型清单

策划在配置事件表时，从下列清单中选择触发条件类型。

### 1. 对话系统触发条件

| 触发条件类型 | 命名格式 | 示例 | 在哪个表配置 |
|------------|---------|------|------------|
| 对话完成 | DIALOGUE_{对话ID}_COMPLETE | DIALOGUE_D045_COMPLETE | 对话表 onComplete字段 |
| 对话选项选择 | DIALOGUE_{对话ID}_CHOICE_{选项ID} | DIALOGUE_D050_CHOICE_A | 对话表 onChoice字段 |

配置说明：
- 对话表中配置 onComplete 字段，对话播放完毕后自动触发
- 对话表中配置 onChoice 字段，玩家选择选项后触发

---

### 2. 场景系统触发条件

| 触发条件类型 | 命名格式 | 示例 | 在哪个表配置 |
|------------|---------|------|------------|
| 场景进入 | SCENE_{场景ID}_ENTER | SCENE_SC102_ENTER | 场景表 onEnter字段 |
| 场景搜证完成 | SCENE_{场景ID}_ALL_EVIDENCE_COLLECTED | SCENE_SC103_ALL_EVIDENCE_COLLECTED | 场景表 onAllEvidenceCollected字段 |

配置说明：
- 场景表中配置 onEnter 字段，玩家进入场景时自动触发
- 场景表中配置 onAllEvidenceCollected 字段，场景内所有证据收集完毕后触发

---

### 3. 证据系统触发条件

| 触发条件类型 | 命名格式 | 示例 | 在哪个表配置 |
|------------|---------|------|------------|
| 证据收集 | {证据ID}_COLLECTED | EV115_COLLECTED | 证据表 onCollected字段 |
| 证据组合 | EVIDENCE_COMBINE_{证据ID1}_{证据ID2} | EVIDENCE_COMBINE_EV114_EV121 | 证据表 onCombine字段 |
| 证据分析 | EVIDENCE_ANALYZE_{证据ID} | EVIDENCE_ANALYZE_EV115 | 证据表 onAnalyze字段 |

配置说明：
- 证据表中配置 onCollected 字段，玩家收集证据时自动触发
- 证据表中配置 onCombine 字段，玩家组合两个证据时触发
- 证据表中配置 onAnalyze 字段，玩家分析证据时触发

---

### 4. 谜题系统触发条件

| 触发条件类型 | 命名格式 | 示例 | 在哪个表配置 |
|------------|---------|------|------------|
| 谜题解开 | PUZZLE_{谜题ID}_SOLVED | PUZZLE_TOOLBOX_SOLVED | 谜题表 onSolved字段 |

配置说明：
- 谜题表中配置 onSolved 字段，玩家输入正确答案后自动触发

---

### 5. 指证系统触发条件

| 触发条件类型 | 命名格式 | 示例 | 在哪个表配置 |
|------------|---------|------|------------|
| 指证成功 | EXPOSE_{NPC名}_{轮次}_SUCCESS | EXPOSE_ROSA_ROUND1_SUCCESS | 指证表 onSuccess字段 |
| 指证完成 | EXPOSE_{NPC名}_SUCCESS | EXPOSE_ROSA_SUCCESS | 指证表 onComplete字段 |

配置说明：
- 指证表中配置 onSuccess 字段，单轮指证成功后触发
- 指证表中配置 onComplete 字段，所有轮次指证完成后触发

---

### 6. 循环系统触发条件

| 触发条件类型 | 命名格式 | 示例 | 在哪个表配置 |
|------------|---------|------|------------|
| 循环完成 | LOOP{循环编号}_COMPLETE | LOOP001_COMPLETE | 循环表 onComplete字段 |

配置说明：
- 循环表中配置 onComplete 字段，循环目标达成后自动触发

---

### 7. 任务系统触发条件

| 触发条件类型 | 命名格式 | 示例 | 在哪个表配置 |
|------------|---------|------|------------|
| 任务完成 | TASK_{任务ID}_COMPLETE | TASK_GOAL_03_COMPLETE | 任务表 onComplete字段 |

配置说明：
- 任务表中配置 onComplete 字段，任务完成后自动触发

---

### 8. 特殊触发条件

| 触发条件类型 | 格式 | 示例 | 配置方式 |
|------------|------|------|---------|
| 开场AVG完成 | 固定字符串 | OPENING_AVG_COMPLETE | 剧本流程控制 |
| 多条件AND | 用逗号分隔多个条件 | EV115_COLLECTED,EV114_COLLECTED,EV121_COLLECTED | 事件表 triggerCondition字段 |

配置说明：
- 多条件用逗号分隔，表示所有条件都满足时才触发
- 示例：EV115_COLLECTED,EV114_COLLECTED 表示两个证据都收集完才触发

---

## 第二部分：解锁内容类型清单

策划在配置事件表时，从下列清单中选择要解锁的内容。

### 1. unlockContent 配置项

| 解锁类型 | 字段名 | 数据类型 | 示例 | 游戏效果 |
|---------|--------|---------|------|---------|
| 解锁场景 | scenes | 数组 | ["SC103", "SC104"] | 场景在地图上可访问 |
| 解锁对话 | dialogues | 数组 | ["D_ROSA_HINT"] | 对话选项出现 |
| 解锁任务 | tasks | 数组 | ["TAS_LOOP001_GOAL_03"] | 任务列表新增任务 |
| 解锁证据 | evidences | 数组 | ["EV114", "EV115"] | 证据背包新增证据 |
| 解锁循环 | loops | 数组 | ["LOOP002"] | 下一循环可访问 |
| 解锁提示 | hints | 数组 | ["密码提示：照片背面"] | 显示提示文本 |
| 解锁谜题 | puzzles | 数组 | ["PUZZLE_SAFE"] | 谜题可交互 |
| 解锁NPC | npcs | 数组 | ["NPC_WEBB"] | NPC可对话 |

配置示例：

```
"unlockContent": {
  "scenes": ["SC103", "SC104"],
  "tasks": ["TAS_LOOP001_GOAL_03"],
  "dialogues": ["D_ROSA_HINT"]
}
```

---

### 2. specialEffects 配置项

| 特殊效果 | 字段名 | 数据类型 | 示例 | 游戏效果 |
|---------|--------|---------|------|---------|
| 完成任务 | completeTask | 字符串 | "TAS_LOOP001_PHASE" | 标记任务完成✓ |
| 删除任务 | removeTask | 字符串或数组 | "TAS_LOOP001_GOAL_03" | 从列表移除任务 |
| 高亮任务 | highlightTask | 字符串 | "TAS_LOOP001_PHASE" | 任务闪烁提示 |
| 更新进度 | updateProgress | 对象 | {taskId, current, total} | 更新进度条 |
| 删除疑点 | removeDoubts | 数组 | ["TAS_LOOP001_DOUBT_02"] | 移除疑点任务 |
| 播放动画 | playAnimation | 字符串 | "LOOP_COMPLETE_EFFECT" | 播放特效动画 |
| 播放音效 | playSound | 字符串 | "SFX_TASK_COMPLETE" | 播放音效 |

配置示例：

```
"specialEffects": {
  "completeTask": "TAS_LOOP001_PHASE",
  "highlightTask": "TAS_LOOP001_PHASE",
  "updateProgress": {
    "taskId": "TAS_LOOP001_PHASE",
    "progressCurrent": 5,
    "progressTotal": 5
  }
}
```

---

## 第三部分：配置表结构说明

### 事件表完整结构

```
{
  "eventId": "事件ID",
  "eventName": "事件名称",
  "triggerCondition": "触发条件（从第一部分选）",
  "unlockContent": {
    "scenes": ["场景ID"],
    "dialogues": ["对话ID"],
    "tasks": ["任务ID"],
    "evidences": ["证据ID"]
  },
  "specialEffects": {
    "completeTask": "任务ID",
    "updateProgress": {...}
  },
  "unlockText": {
    "cn": "中文提示",
    "en": "英文提示"
  },
  "ifInterrupt": 0,
  "priority": 85
}
```

字段说明：

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| eventId | 字符串 | 是 | 事件唯一标识，格式：EVE_{功能}_{描述} |
| eventName | 字符串 | 是 | 事件中文名称，方便查看 |
| triggerCondition | 字符串 | 是 | 触发条件，从第一部分选择 |
| unlockContent | 对象 | 否 | 解锁内容，从第二部分选择 |
| specialEffects | 对象 | 否 | 特殊效果，从第二部分选择 |
| unlockText | 对象 | 否 | 解锁提示文本 |
| ifInterrupt | 数字 | 是 | 是否打断（0=不打断，1=打断） |
| priority | 数字 | 是 | 优先级（0-100，数字越大越优先） |

---

### 配置表关联关系

| 配置表 | 需要配置的字段 | 关联到事件表的字段 |
|--------|--------------|------------------|
| 对话表 | onComplete: DIALOGUE_D045_COMPLETE | triggerCondition: DIALOGUE_D045_COMPLETE |
| 场景表 | onEnter: SCENE_SC102_ENTER | triggerCondition: SCENE_SC102_ENTER |
| 证据表 | onCollected: EV115_COLLECTED | triggerCondition: EV115_COLLECTED |
| 谜题表 | onSolved: PUZZLE_TOOLBOX_SOLVED | triggerCondition: PUZZLE_TOOLBOX_SOLVED |
| 指证表 | onSuccess: EXPOSE_ROSA_ROUND1_SUCCESS | triggerCondition: EXPOSE_ROSA_ROUND1_SUCCESS |
| 任务表 | taskId: TAS_LOOP001_GOAL_03 | unlockContent.tasks: ["TAS_LOOP001_GOAL_03"] |

配置规则：
- 对话表、场景表、证据表等配置 onComplete/onEnter/onCollected 字段
- 事件表的 triggerCondition 监听这些字段的值
- 事件表的 unlockContent 引用任务表、场景表等的ID

---

## 第四部分：程序实现要点

### 1. EventManager 核心逻辑

EventManager负责监听游戏状态变化，检查触发条件，执行解锁内容。

主要方法：

| 方法名 | 参数 | 说明 |
|--------|------|------|
| OnGameStateChanged | string condition | 接收触发条件通知 |
| CheckCondition | string configCondition, string currentTrigger | 检查条件是否满足 |
| TriggerEvent | EventConfig eventConfig | 执行事件解锁 |

触发流程：

```
1. 游戏中发生事件（对话完成、证据收集等）
2. 对应系统调用 GameState.SetCondition(条件ID, true)
3. GameState通知 EventManager.OnGameStateChanged(条件ID)
4. EventManager遍历所有事件，检查 triggerCondition
5. 条件满足的事件执行 TriggerEvent
6. 读取 unlockContent 和 specialEffects 执行解锁
```

---

### 2. 各系统触发条件的实现

| 系统 | 触发时机 | 调用代码 |
|------|---------|---------|
| 对话系统 | 对话播放完毕 | GameState.SetCondition(config.onComplete, true) |
| 场景系统 | 玩家进入场景 | GameState.SetCondition(config.onEnter, true) |
| 证据系统 | 玩家收集证据 | GameState.SetCondition(evidenceId + "_COLLECTED", true) |
| 谜题系统 | 玩家输入正确答案 | GameState.SetCondition(config.onSolved, true) |
| 指证系统 | 指证成功 | GameState.SetCondition(config.onSuccess, true) |

---

### 3. unlockContent 的执行逻辑

| 字段 | 执行方法 | 说明 |
|------|---------|------|
| scenes | SceneManager.UnlockScene(sceneId) | 遍历数组，逐个解锁场景 |
| dialogues | DialogueManager.UnlockDialogue(dialogueId) | 遍历数组，逐个解锁对话 |
| tasks | TaskManager.UnlockTask(taskId) | 遍历数组，逐个添加任务到列表 |
| evidences | EvidenceManager.UnlockEvidence(evidenceId) | 遍历数组，逐个添加证据到背包 |

伪代码示例：

```
if (eventConfig.unlockContent.tasks != null)
{
    foreach (string taskId in eventConfig.unlockContent.tasks)
    {
        TaskManager.Instance.UnlockTask(taskId);
    }
}
```

---

### 4. specialEffects 的执行逻辑

| 字段 | 执行方法 | 说明 |
|------|---------|------|
| completeTask | TaskManager.CompleteTask(taskId) | 标记任务为完成状态 |
| highlightTask | TaskManager.HighlightTask(taskId) | UI上高亮闪烁任务 |
| updateProgress | TaskManager.UpdateTaskProgress(taskId, current, total) | 更新任务进度条 |
| removeDoubts | TaskManager.RemoveTasks(doubtIds) | 从列表移除疑点任务 |
| playAnimation | AnimationManager.Play(animationId) | 播放特效动画 |

---

### 5. 多条件触发的实现

当 triggerCondition 包含逗号时，表示AND关系。

```
triggerCondition: "EV115_COLLECTED,EV114_COLLECTED,EV121_COLLECTED"
```

实现逻辑：

```
private bool CheckCondition(string configCondition)
{
    string[] conditions = configCondition.Split(',');

    foreach (string condition in conditions)
    {
        if (!GameState.Instance.IsConditionMet(condition.Trim()))
        {
            return false;
        }
    }

    return true;
}
```

---

### 6. 优先级和打断机制

| 字段 | 取值范围 | 说明 |
|------|---------|------|
| priority | 0-100 | 数字越大越优先执行 |
| ifInterrupt | 0或1 | 1表示立即打断当前流程执行 |

执行顺序：
1. EventManager收集所有满足条件的事件
2. 按 priority 从高到低排序
3. 依次执行，遇到 ifInterrupt=1 的事件立即执行并暂停其他流程

建议优先级：
- 100：循环开始/完成
- 90-95：指证成功、关键剧情
- 70-85：场景解锁、对话完成、证据收集
- 50-60：环境叙事、提示信息

---

### 7. GameState 状态管理

GameState负责记录所有触发条件的状态。

主要方法：

| 方法名 | 参数 | 说明 |
|--------|------|------|
| SetCondition | string conditionId, bool value | 设置条件状态 |
| IsConditionMet | string conditionId | 检查条件是否满足 |
| MarkEvidenceCollected | string evidenceId | 标记证据已收集（会自动调用SetCondition） |
| MarkPuzzleSolved | string puzzleId | 标记谜题已解开（会自动调用SetCondition） |

数据存储：

```
private Dictionary<string, bool> conditionStates = new Dictionary<string, bool>();
```

---

## 第五部分：配置示例

### 示例1：对话完成解锁场景和任务

对话表配置：

| 对话ID | 对话名称 | onComplete |
|--------|---------|-----------|
| D045 | Emma初次对话 | DIALOGUE_D045_COMPLETE |

事件表配置：

| 事件ID | 触发条件 | 解锁场景 | 解锁任务 |
|--------|---------|---------|---------|
| EVE_EMMA_TALK_COMPLETE | DIALOGUE_D045_COMPLETE | SC103, SC104, SC105 | TAS_LOOP001_GOAL_03 |

---

### 示例2：证据收集完成更新任务进度

证据表配置：

| 证据ID | 证据名称 | onCollected |
|--------|---------|------------|
| EV115 | 工作记录卡 | EV115_COLLECTED |

事件表配置：

| 事件ID | 触发条件 | 解锁任务 | 特效-更新进度 |
|--------|---------|---------|-------------|
| EVE_ALL_EVIDENCES | EV115_COLLECTED,EV114_COLLECTED,... | TAS_LOOP001_GOAL_06 | taskId:TAS_LOOP001_PHASE, current:5, total:5 |

---

### 示例3：指证成功完成任务

指证表配置：

| 指证ID | NPC | 轮次 | onSuccess |
|--------|-----|------|-----------|
| EXPOSE_ROSA_ROUND3 | Rosa | 3 | EXPOSE_ROSA_ROUND3_SUCCESS |

事件表配置：

| 事件ID | 触发条件 | 解锁对话 | 特效-完成任务 |
|--------|---------|---------|-------------|
| EVE_ROSA_EXPOSE_ROUND3 | EXPOSE_ROSA_ROUND3_SUCCESS | D_ROSA_ROUND3_RESULT | TAS_LOOP001_PHASE |

---

## 附录：命名规范

### 事件ID命名规范

格式：EVE_{功能}_{描述}

| 功能类型 | 前缀示例 | 完整示例 |
|---------|---------|---------|
| 循环开始 | EVE_LOOP{编号}_START | EVE_LOOP001_START |
| 场景进入 | EVE_ENTER_{场景ID} | EVE_ENTER_SC102 |
| 对话完成 | EVE_{NPC名}_TALK_COMPLETE | EVE_EMMA_TALK_COMPLETE |
| 证据收集 | EVE_COLLECT_{证据ID} | EVE_COLLECT_EV115 |
| 谜题解开 | EVE_SOLVE_{谜题描述} | EVE_SOLVE_TOOLBOX_PUZZLE |
| 指证成功 | EVE_{NPC名}_EXPOSE_ROUND{N} | EVE_ROSA_EXPOSE_ROUND1_SUCCESS |

### 触发条件命名规范

遵循第一部分的命名格式，确保：
- 全部大写
- 使用下划线分隔
- 格式一致性

### 配置表ID命名规范

| 配置表 | ID格式 | 示例 |
|--------|--------|------|
| 场景 | SC{编号} | SC102, SC103 |
| 对话 | D{编号} 或 D_{描述} | D045, D_ROSA_ROUND1 |
| 证据 | EV{编号} | EV111, EV115 |
| 任务 | TAS_{循环}_{类型}_{编号} | TAS_LOOP001_GOAL_03 |
| 谜题 | PUZZLE_{描述} | PUZZLE_TOOLBOX |
| 循环 | LOOP{编号} | LOOP001, LOOP002 |

---

文档结束
