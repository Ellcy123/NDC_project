# Config 目录配置文件说明

## 📋 文件清单

### JSON 配置文件

| 文件名 | 说明 | 数据行数 | 状态 |
|--------|------|---------|------|
| **story_tbtalk.json** | 对话系统配置 | 2488行 | ✅ 已有数据 |
| **story_tbnpcstaticdata.json** | NPC静态数据 | 10个NPC | ✅ 已有数据 |
| **story_tbitemstaticdata.json** | 物品静态数据 | 8个物品 | ✅ 已有数据 |
| **UITextConfig.json** | UI文本配置 | 35条文本 | 🆕 新增 |
| **SceneConfig.json** | 场景配置 | 19个场景 | 🆕 新增 |

### Excel 配置表（便于编辑）

| 文件名 | 说明 | 用途 |
|--------|------|------|
| **story_tbitemstaticdata.xlsx** | 物品静态数据表 | 查看/编辑物品配置 |
| **UITextConfig.xlsx** | UI文本配置表 | 查看/编辑UI文本 |
| **SceneConfig.xlsx** | 场景配置表 | 查看/编辑场景配置 |

---

## 📦 新增配置说明

### 1. UITextConfig.json - UI文本配置

**用途**: 统一管理游戏中所有UI提示文本、菜单文本、教学文本等。

**字段说明**:

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| textId | string | 文本唯一ID | UNLOCK_SCENE |
| category | string | 文本分类 | 场景解锁 |
| context | string | 使用场景说明 | 场景解锁提示 |
| cnText | string | 中文文本 | {sceneName} 已解锁 |
| enText | string | 英文文本 | {sceneName} Unlocked |
| displayDuration | float | 显示时长（秒）| 2.0 |
| soundEffect | string | 配套音效ID | SFX_UNLOCK |

**文本分类**:
- 场景解锁 - 场景解锁相关提示
- 证据获取 - 证据获取相关提示
- 对话解锁 - 对话解锁提示
- 指证结果 - 指证成功/失败提示
- 任务系统 - 任务相关提示
- 新手教学 - 教学提示
- 场景限制 - 场景无法进入提示
- 证据分析 - 证据分析提示
- 证据组合 - 证据组合提示
- 循环完成 - 循环完成提示
- 时间限制 - 时间相关提示
- 系统提示 - 保存/读取提示
- 菜单文本 - 菜单按钮文本
- 确认对话 - 确认框文本

**变量占位符**:
- `{sceneName}` - 场景名称
- `{evidenceName}` - 证据名称
- `{npcName}` - NPC名称
- `{taskText}` - 任务文本
- `{loopNumber}` - 循环编号
- `{loopName}` - 循环名称
- `{hours}` - 小时数

**使用示例**:
```csharp
// 代码中调用
string text = UITextManager.GetText("UNLOCK_SCENE", sceneName: "Rosa储藏室");
// 结果: "Rosa储藏室 已解锁"
```

---

### 2. SceneConfig.json - 场景配置

**用途**: 配置游戏中所有场景的属性、解锁条件、NPC分布等。

**字段说明**:

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| sceneId | string | 场景唯一ID | SC103 |
| sceneName | string | 场景中文名称 | Rosa储藏室 |
| sceneNameEn | string | 场景英文名称 | Rosa's Storage Room |
| chapterId | string | 所属章节ID | CH001 |
| loopId | string | 所属循环ID | LOOP001 |
| sceneType | string | 场景类型 | crime / dialogue / transition |
| backgroundImage | string | 背景图资源路径 | Art/Scenes/Rosa_Storage.png |
| backgroundMusic | string | 背景音乐ID | BGM_INVESTIGATION |
| ambientSound | string | 环境音效ID | AMB_ROOM_BASEMENT |
| unlockCondition | string | 解锁条件 | DIALOGUE_ROSA_001_COMPLETE |
| unlockText | string | 解锁提示文本 | Rosa储藏室 已解锁 |
| npcsPresent | string | 场景中的NPC列表 | NPC003,NPC009 |
| canSearch | boolean | 是否可搜证 | true / false |
| canLeave | boolean | 是否可离开 | true / false |
| initialDialogue | string | 进入场景时的对话ID | D_ROSA_001 |
| description | string | 场景备注说明 | 搜证场景,可获得证据111-115 |

**场景类型说明**:
- `dialogue` - 对话场景（有NPC对话）
- `crime` - 搜证场景（可搜集证据）
- `transition` - 过渡场景（连接用）

**Episode 1 场景分布**:

#### 循环1 (LOOP001) - Rosa现场目击指证
- SC101: Webb会客室（开场）
- SC102: 歌舞厅外的街道（与Emma对话）
- SC103: Rosa储藏室（搜证）
- SC104: 歌舞厅一楼走廊（搜证）
- SC105: Tommy办公室（访谈）
- SC106: 酒吧大堂（指证Rosa）
- SC119: Webb会客室-2（Emma出场）

#### 循环2 (LOOP002) - Morrison指证
- SC107: Vivian化妆室（访谈）
- SC110: Morrison家中客厅（访谈Morrison夫人）
- SC111: Morrison家中书房（搜证）
- SC112: Morrison警局办公室（指证Morrison）
- SC118: Morrison家中外景（过渡）

#### 循环3 (LOOP003) - Webb勒索网络
- SC108: Jimmy厨房（访谈Jimmy）
- SC109: Webb办公室（搜证勒索证据）

#### 循环4 (LOOP004)
- SC113: 歌舞厅二楼走廊（搜证）

#### 循环5 (LOOP005) - Vivian动机
- SC117: 酒吧歌舞厅（调查Vivian动机）

#### 循环6 (LOOP006) - Jimmy真相
- SC114: Jimmy家中卧室（Jimmy自杀场景）
- SC115: Jimmy家中客厅（与Anna对话）
- SC116: 厨房通道（搜证作案路径）

---

## 🔧 使用建议

### 编辑配置流程

1. **使用 Excel 编辑**
   - 打开 `.xlsx` 文件
   - 在 Excel 中编辑数据
   - 保存

2. **转换回 JSON**
   - 需要开发相应的 Excel → JSON 转换工具
   - 或手动更新 JSON 文件

3. **验证配置**
   - 使用 JSON 验证工具检查格式
   - 检查 ID 引用是否正确

### 配置规范

#### ID 命名规范

**场景 ID**:
- 格式: `SC` + 3位数字
- 示例: `SC101`, `SC102`

**文本 ID**:
- 格式: `类别_功能_描述`
- 示例: `UNLOCK_SCENE`, `EXPOSE_SUCCESS`

**条件 ID**:
- 格式: `类型_目标_状态`
- 示例: `DIALOGUE_ROSA_001_COMPLETE`, `EVIDENCE_EV112_GET`

#### 多语言支持

所有面向玩家的文本都需要提供中英文：
- `cnText` / `enText` (UI文本)
- `sceneName` / `sceneNameEn` (场景名称)
- `cnWords` / `enWords` (对话文本)

---

## 🚀 后续扩展计划

### 近期需补充

1. **ExposeConfig.json** - 指证系统配置
2. **EvidenceConfig.json** - 证据系统配置
3. **TaskConfig.json** - 任务系统配置
4. **EventConfig.json** - 事件触发配置

### 长期规划

1. **AudioConfig.json** - 音频资源映射
2. **RelationshipConfig.json** - 人物关系配置
3. **DifficultyConfig.json** - 难度配置
4. **TutorialConfig.json** - 新手教学配置

---

## 📝 更新日志

### 2025-11-15
- 🆕 新增 UITextConfig.json (35条UI文本)
- 🆕 新增 SceneConfig.json (19个场景配置)
- 🆕 生成对应的 Excel 表格
- 📝 创建配置文件说明文档

### 历史版本
- story_tbtalk.json - 对话系统（2488行）
- story_tbnpcstaticdata.json - NPC数据（10个）
- story_tbitemstaticdata.json - 物品数据（8个）

---

**维护人**: 策划团队
**技术支持**: 程序团队
