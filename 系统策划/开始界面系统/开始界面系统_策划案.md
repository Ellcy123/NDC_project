# NDC 开始界面系统策划案

**文档版本**: v1.0
**创建日期**: 2025-12-07
**更新日期**: 2025-12-07
**系统名称**: Title Screen / Main Menu System

---

## 一、系统概述

### 1.1 系统定位

开始界面（Title Screen）是玩家启动游戏后首先看到的界面，承担以下核心职责：

| 职责 | 说明 |
|:---|:---|
| **品牌展示** | 展示游戏Logo、制作公司信息，建立第一印象 |
| **进度入口** | 提供新游戏、继续游戏、章节选择等入口 |
| **设置管理** | 提供游戏设置、存档管理的快捷入口 |
| **氛围营造** | 通过背景美术、音乐奠定游戏基调 |

### 1.2 设计理念

> **「侦探档案室的入口」**
> 主界面采用1920年代芝加哥街景作为背景，配合复古红黑配色和打字机字体，让玩家在进入游戏前就感受到黄昏年代的侦探氛围。

> **「无缝衔接，即时恢复」**
> 通过智能存档系统和断线重连机制，确保玩家无论何时退出或意外中断，都能快速回到上次游玩的位置。

### 1.3 核心设计目标

| 目标 | 说明 |
|:---|:---|
| **快速进入** | 玩家能在3次点击内开始/继续游戏 |
| **状态清晰** | 清晰展示游戏进度、存档状态 |
| **容错设计** | 断线、崩溃后能自动恢复进度 |
| **平台兼容** | 支持Steam云存档，多设备同步 |

---

## 二、界面布局

### 2.1 视觉设计

**背景画面**：1920年代芝加哥街景
- 黄昏时分的城市街道
- 远处工厂烟囱、近处码头木栈道
- 路灯散发昏黄光芒
- 行人剪影点缀画面
- 整体色调：深褐色、暗红色、金黄色

**Logo区域**：
- 位置：画面左上方
- 内容：「GAZE IN SHADOWS」游戏Logo
- 副标题：「STORY-DRIVEN DETECTIVE GAME」
- 风格：Art Deco字体，带阴影效果

**菜单区域**：
- 位置：画面左侧垂直排列
- 宽度：约屏幕1/4
- 背景：半透明黑色遮罩（30%透明度）

**版权信息**：
- 位置：画面底部居中
- 内容：「BION INTERACTIVE ENTERTAINMENT PRESENTS」
- 字体：间距较大的衬线字体

### 2.2 界面布局图

```
┌────────────────────────────────────────────────────────────────────────────────┐
│                                                                                │
│   ┌─────────────────┐                                                          │
│   │   GAZE IN       │                                                          │
│   │   SHADOWS       │              [ 1920s 芝加哥街景背景 ]                     │
│   │  ─────────────  │                                                          │
│   │ STORY-DRIVEN    │                   工厂烟囱 │ 建筑剪影                     │
│   │ DETECTIVE GAME  │                            │                             │
│   └─────────────────┘                            │                             │
│                                                  ↓                             │
│   ┌─────────────────────────┐          ┌─────────────────────────┐            │
│   │▓▓▓▓▓▓▓ NEW GAME ▓▓▓▓▓▓▓│←(选中)   │                         │            │
│   └─────────────────────────┘          │    码头木栈道            │            │
│   ┌─────────────────────────┐          │                         │            │
│   │    CHAPTER SELECT       │          │  🚶 行人剪影  🚗 老爷车   │            │
│   └─────────────────────────┘          │                         │            │
│   ┌─────────────────────────┐          │    💡 路灯光芒           │            │
│   │    ACHIEVEMENT          │          │                         │            │
│   └─────────────────────────┘          └─────────────────────────┘            │
│   ┌─────────────────────────┐                                                  │
│   │    SETTINGS             │                                                  │
│   └─────────────────────────┘                                                  │
│   ┌─────────────────────────┐                                                  │
│   │    DOWNLOAD             │                                                  │
│   └─────────────────────────┘                                                  │
│   ┌─────────────────────────┐                                                  │
│   │    CREDITS              │                                                  │
│   └─────────────────────────┘                                                  │
│   ┌─────────────────────────┐                                                  │
│   │    QUIT                 │                                                  │
│   └─────────────────────────┘                                                  │
│                                                                                │
│             B I O N   I N T E R A C T I V E   E N T E R T A I N M E N T       │
│                              P R E S E N T S                                   │
└────────────────────────────────────────────────────────────────────────────────┘
```

### 2.3 菜单按钮样式

| 状态 | 视觉表现 | 说明 |
|:---|:---|:---|
| **默认** | 深灰底色 + 白色文字 | 未选中的按钮 |
| **选中/悬停** | 红色底色 + 白色文字 + 左侧红色横条延伸至屏幕边缘 | 当前选中项 |
| **禁用** | 深灰底色 + 灰色文字（50%透明度） | 不可用选项 |
| **点击** | 亮红色底色 + 按压缩放动画 | 点击瞬间 |

---

## 三、菜单选项详解

### 3.1 菜单列表

| 序号 | 英文名称 | 中文名称 | 功能说明 |
|:---|:---|:---|:---|
| 1 | NEW GAME | 新游戏 | 开始全新游戏 |
| 2 | CHAPTER SELECT | 章节选择 | 选择已解锁章节开始/重玩 |
| 3 | ACHIEVEMENT | 成就 | 查看成就列表和解锁状态 |
| 4 | SETTINGS | 设置 | 进入设置系统 |
| 5 | DOWNLOAD | 下载 | DLC/额外内容下载（预留） |
| 6 | CREDITS | 制作人员 | 查看制作团队名单 |
| 7 | QUIT | 退出 | 退出游戏 |

### 3.2 动态菜单规则

根据玩家存档状态，菜单显示会动态变化：

| 存档状态 | 菜单变化 |
|:---|:---|
| **无存档（首次启动）** | 仅显示 NEW GAME，CHAPTER SELECT 显示为灰色不可点击 |
| **有进行中存档** | NEW GAME 上方新增 **CONTINUE** 选项，且默认选中 |
| **有已完成章节** | CHAPTER SELECT 可用 |

#### 有存档时的菜单布局

```
┌─────────────────────────┐
│▓▓▓▓▓ CONTINUE ▓▓▓▓▓▓▓▓▓│←(默认选中，显示进度提示)
│  "Chapter 2 - 威胁链条" │
└─────────────────────────┘
┌─────────────────────────┐
│      NEW GAME           │
└─────────────────────────┘
┌─────────────────────────┐
│   CHAPTER SELECT        │
└─────────────────────────┘
        ...
```

### 3.3 各选项详细说明

#### 3.3.1 CONTINUE（继续游戏）

| 属性 | 说明 |
|:---|:---|
| **显示条件** | 存在进行中的游戏存档 |
| **功能** | 加载最近存档点，继续游戏 |
| **进度提示** | 按钮下方显示当前章节名称 |
| **快捷操作** | 按 Enter 键直接继续 |
| **默认状态** | 有存档时默认选中此项 |

**加载流程**：
1. 检测最近存档类型（自动存档/临时存档）
2. 显示加载进度条
3. 恢复游戏状态（场景、证据、对话进度）
4. 进入游戏

#### 3.3.2 NEW GAME（新游戏）

| 属性 | 说明 |
|:---|:---|
| **显示条件** | 始终显示 |
| **功能** | 开始全新游戏流程 |
| **存档处理** | 若已有存档，弹出确认提示 |

**确认弹窗（已有存档时）**：

```
┌────────────────────────────────────────────┐
│           START NEW GAME?                   │
├────────────────────────────────────────────┤
│                                            │
│  开始新游戏将覆盖当前进度。                  │
│  您确定要重新开始吗？                        │
│                                            │
│  当前进度：Chapter 2 - 威胁链条             │
│  游玩时长：2小时35分                        │
│                                            │
│         [取消]        [确认开始]            │
└────────────────────────────────────────────┘
```

**难度选择界面**：

确认新游戏后，进入难度选择界面：

```
┌────────────────────────────────────────────┐
│           SELECT DIFFICULTY                 │
├────────────────────────────────────────────┤
│                                            │
│  ┌────────────────────────────────────┐    │
│  │▓▓▓▓▓▓▓ NORMAL MODE ▓▓▓▓▓▓▓▓▓▓▓▓▓▓│    │
│  │  提供适量提示，专注故事体验         │    │
│  │  推荐首次游玩的玩家                 │    │
│  └────────────────────────────────────┘    │
│                                            │
│  ┌────────────────────────────────────┐    │
│  │        EXPERT MODE                 │    │
│  │  无任何提示，纯粹推理挑战           │    │
│  │  推荐推理游戏老玩家                 │    │
│  └────────────────────────────────────┘    │
│                                            │
│  * 难度可在游戏中随时调整                   │
│                                            │
└────────────────────────────────────────────┘
```

#### 3.3.3 CHAPTER SELECT（章节选择）

| 属性 | 说明 |
|:---|:---|
| **显示条件** | 始终显示 |
| **可用条件** | 至少完成一个章节 |
| **功能** | 进入章节选择界面，选择章节后查看案情进展 |
| **跳转目标** | `案情回顾系统/case_review_system.html?mode=select` |

**入口流程说明**：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ 从开始界面点击 CHAPTER SELECT                                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌───────────────┐      ┌───────────────┐      ┌───────────────┐          │
│   │ 开始界面      │  →   │ 章节选择界面  │  →   │ 案情进展界面  │          │
│   │ CHAPTER SELECT│      │（所有章节卡片）│      │（该章节详情） │          │
│   └───────────────┘      └───────────────┘      └───────────────┘          │
│                                                                             │
│   与游戏中OVERVIEW入口不同：                                                 │
│   • 开始界面 CHAPTER SELECT → 先显示章节选择界面 → 点击章节 → 进入详情       │
│   • 游戏中 OVERVIEW → 直接进入当前章节的案情进展界面                         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

> 详细设计参见《案情回顾系统_策划案.md》

#### 3.3.4 ACHIEVEMENT（成就）

| 属性 | 说明 |
|:---|:---|
| **显示条件** | 始终显示 |
| **功能** | 查看成就列表、解锁条件、完成进度 |
| **数据来源** | 与Steam成就系统同步 |

#### 3.3.5 SETTINGS（设置）

| 属性 | 说明 |
|:---|:---|
| **显示条件** | 始终显示 |
| **功能** | 进入设置系统 |
| **跳转目标** | 设置系统界面 |

> 详细设计参见《设置系统_策划案.md》

#### 3.3.6 DOWNLOAD（下载）

| 属性 | 说明 |
|:---|:---|
| **显示条件** | 始终显示 |
| **当前状态** | 预留功能，暂不可用 |
| **未来用途** | DLC内容、额外章节下载入口 |
| **禁用提示** | 点击时显示"敬请期待" |

#### 3.3.7 CREDITS（制作人员）

| 属性 | 说明 |
|:---|:---|
| **显示条件** | 始终显示 |
| **功能** | 展示制作团队名单 |
| **展示方式** | 滚动字幕 + 背景音乐 |
| **退出方式** | 按任意键或点击屏幕返回 |

#### 3.3.8 QUIT（退出）

| 属性 | 说明 |
|:---|:---|
| **显示条件** | 始终显示 |
| **功能** | 退出游戏 |
| **确认弹窗** | "确定要退出游戏吗？" [取消] / [确定] |
| **Steam平台** | 退出前自动触发云存档同步 |

---

## 四、存档系统设计

### 4.1 存档类型

NDC采用**多层存档机制**，确保玩家进度安全：

| 存档类型 | 触发时机 | 保存位置 | 保留策略 |
|:---|:---|:---|:---|
| **章节存档** | 章节结束（指证成功） | 本地+云端 | 永久保留，不可删除 |
| **自动存档** | 关键节点自动触发 | 本地+云端 | 保留最近3个 |
| **临时存档** | 退出游戏时 | 仅本地 | 下次启动后清除 |
| **快照存档** | 每10分钟自动创建 | 仅本地 | 保留最近1个 |

### 4.2 自动存档触发点

| 触发条件 | 说明 | 优先级 |
|:---|:---|:---|
| 章节开始 | 进入新章节开篇时 | 高 |
| 场景切换 | 从一个场景移动到另一个场景 | 中 |
| 关键对话完成 | 完成重要NPC对话后 | 中 |
| 证据获取 | 获得新证据时 | 中 |
| 进入指证阶段 | 触发指证战斗前 | 高 |
| 指证轮次完成 | 每轮指证成功后 | 高 |

### 4.3 存档数据结构

| 字段 | 类型 | 说明 |
|:---|:---|:---|
| `save_id` | string | 存档唯一标识 |
| `save_type` | enum | 存档类型（chapter/auto/temp/snapshot） |
| `save_time` | datetime | 存档创建时间 |
| `play_time` | int | 累计游玩时长（秒） |
| `unit_id` | string | 当前单元ID |
| `chapter_id` | string | 当前章节ID（内部Loop编号） |
| `chapter_name` | string | 章节显示名称 |
| `scene_id` | string | 当前场景ID |
| `game_state` | object | 游戏状态快照 |
| └ `evidence_ids` | array | 已获得证据ID列表 |
| └ `unlocked_scenes` | array | 已解锁场景ID列表 |
| └ `completed_dialogues` | array | 已完成对话ID列表 |
| └ `flags` | object | 剧情标记字典 |
| └ `npc_states` | object | NPC状态字典 |
| `difficulty` | string | 当前难度（normal/expert） |
| `checksum` | string | 数据校验码 |

### 4.4 存档位置

| 平台 | 本地存档路径 | 云存档 |
|:---|:---|:---|
| Windows (Steam) | `%USERPROFILE%\AppData\LocalLow\BION\NDC\Saves\` | Steam Cloud |
| Windows (非Steam) | `%USERPROFILE%\Documents\NDC\Saves\` | 不支持 |

### 4.5 存档完整性校验

每次读取存档时执行以下校验：

| 校验项 | 失败处理 |
|:---|:---|
| 文件存在性 | 提示"存档文件丢失"，提供云端恢复选项 |
| JSON格式校验 | 提示"存档文件损坏"，尝试加载备份 |
| 校验码验证 | 提示"存档数据异常"，尝试加载上一个自动存档 |
| 版本兼容性 | 自动执行存档迁移，或提示"存档版本不兼容" |

---

## 五、断线重连与异常恢复

### 5.1 设计目标

> **「玩家不应因技术问题丢失任何进度」**

无论是游戏崩溃、系统断电、网络中断还是手动强制退出，系统都应尽可能恢复玩家的最近进度。

### 5.2 异常场景处理

| 异常场景 | 检测方式 | 恢复策略 |
|:---|:---|:---|
| **游戏崩溃** | 下次启动检测到未正常退出标记 | 加载最近快照存档 |
| **系统断电** | 同上 | 加载最近快照存档 |
| **强制退出（Alt+F4）** | 同上 | 加载最近快照存档 |
| **Steam离线模式** | 检测Steam API状态 | 使用本地存档，稍后同步 |
| **云存档同步失败** | Steam API返回错误 | 保留本地存档，提示用户 |

### 5.3 异常退出检测机制

**实现原理**：
1. 游戏启动时创建"运行中"标记文件
2. 正常退出时删除该标记文件
3. 下次启动检测标记文件是否存在
4. 若存在，说明上次非正常退出

**恢复流程**：

```
游戏启动
    ↓
检测"运行中"标记 ──存在──→ 显示恢复提示弹窗
    │                         │
不存在                    [恢复进度] / [忽略]
    │                         │
    ↓                         ↓
正常启动              加载快照存档 / 正常启动
```

**恢复提示弹窗**：

```
┌────────────────────────────────────────────┐
│           RECOVER PROGRESS?                 │
├────────────────────────────────────────────┤
│                                            │
│  检测到游戏上次未正常退出。                  │
│                                            │
│  是否恢复到上次的游戏进度？                  │
│                                            │
│  恢复点：Chapter 2 - 威胁链条               │
│  场景：赌场                                 │
│  时间：2025-12-07 15:32                    │
│                                            │
│       [忽略]        [恢复进度]              │
└────────────────────────────────────────────┘
```

### 5.4 快照存档机制

| 属性 | 说明 |
|:---|:---|
| 创建频率 | 每10分钟自动创建一次 |
| 保留数量 | 仅保留最近1个 |
| 存储位置 | 本地临时目录 |
| 命名规则 | `snapshot_[timestamp].sav` |
| 触发条件 | 游戏处于活跃状态（非暂停、非菜单） |

**快照时机优化**：
- 避免在过场动画、对话中创建快照
- 优先在场景加载完成后创建
- 避免在指证战斗中创建（可能导致状态不一致）

### 5.5 存档冲突处理

当本地存档与云端存档不一致时：

```
┌────────────────────────────────────────────┐
│           SAVE CONFLICT DETECTED            │
├────────────────────────────────────────────┤
│                                            │
│  检测到本地存档与云端存档不一致。            │
│                                            │
│  ┌──────────────────┐ ┌──────────────────┐ │
│  │   本地存档        │ │   云端存档        │ │
│  │                  │ │                  │ │
│  │ Chapter 3       │ │ Chapter 2       │ │
│  │ 掠夺性贷款揭露   │ │ 威胁链条         │ │
│  │ 3小时12分       │ │ 2小时05分        │ │
│  │ 12-07 16:00    │ │ 12-06 22:30     │ │
│  │                  │ │                  │ │
│  │    [使用此存档]   │ │    [使用此存档]   │ │
│  └──────────────────┘ └──────────────────┘ │
│                                            │
│           [稍后决定（暂用本地）]              │
└────────────────────────────────────────────┘
```

**冲突解决规则**：
1. 显示双方存档的详细信息（章节、时长、时间）
2. 让玩家自主选择使用哪个存档
3. 被放弃的存档移至备份目录，不立即删除
4. 选择后立即同步到云端

---

## 六、Steam云存档集成

### 6.1 云存档范围

| 数据类型 | 是否同步 | 说明 |
|:---|:---|:---|
| 章节存档 | ✅ 同步 | 核心进度数据 |
| 自动存档 | ✅ 同步 | 保留最近3个 |
| 临时存档 | ❌ 不同步 | 仅本地临时使用 |
| 快照存档 | ❌ 不同步 | 仅用于崩溃恢复 |
| 设置数据 | ✅ 同步 | 难度、音量等设置 |
| 成就进度 | ✅ 同步 | 通过Steam成就API |

### 6.2 同步时机

| 时机 | 同步方向 | 说明 |
|:---|:---|:---|
| 游戏启动 | 云端 → 本地 | 拉取最新云端数据 |
| 章节完成 | 本地 → 云端 | 上传章节存档 |
| 自动存档创建 | 本地 → 云端 | 上传自动存档 |
| 游戏退出 | 本地 → 云端 | 确保最新数据上传 |
| 设置修改 | 本地 → 云端 | 上传设置变更 |

### 6.3 离线模式处理

| 场景 | 处理方式 |
|:---|:---|
| Steam离线模式启动 | 使用本地存档，标记待同步 |
| 游戏中网络断开 | 继续使用本地存档，存档标记待同步 |
| 恢复在线后 | 自动触发同步，若有冲突则提示用户 |

### 6.4 云存档配额

| 属性 | 限制 |
|:---|:---|
| 单个存档大小 | 最大 1MB |
| 总配额 | 最大 100MB |
| 文件数量 | 最大 100个 |

---

## 七、启动流程

### 7.1 完整启动流程图

```
游戏启动
    ↓
显示公司Logo（2秒）
    ↓
显示游戏Logo（2秒）
    ↓
初始化系统
├── 加载本地设置
├── 连接Steam API
├── 检测云存档
└── 检测异常退出标记
    ↓
存档状态判断 ────────────────────────────────────────┐
    │                                               │
    ├── 检测到异常退出 → 显示恢复提示弹窗             │
    │                                               │
    ├── 检测到存档冲突 → 显示冲突解决弹窗             │
    │                                               │
    └── 正常状态 ─────────────────────────────────────┘
                    ↓
              显示主菜单
                    ↓
        ┌─────────────────────┐
        │ 根据存档状态调整菜单  │
        │ - 有存档：显示CONTINUE│
        │ - 无存档：隐藏CONTINUE│
        └─────────────────────┘
```

### 7.2 启动性能优化

| 优化项 | 说明 |
|:---|:---|
| Logo可跳过 | 按任意键跳过Logo动画 |
| 异步加载 | Logo显示期间后台加载资源 |
| 存档预检 | 仅检测存档元数据，不完整加载 |
| 延迟加载 | 章节资源在选择后再加载 |

### 7.3 首次启动特殊处理

首次启动游戏时的特殊流程：

1. 显示语言选择界面（英语/简体中文）
2. 显示简要操作说明
3. 进入主菜单，NEW GAME为唯一可用选项
4. 点击NEW GAME后显示难度选择

---

## 八、UI交互规则

### 8.1 键盘操作

| 按键 | 功能 |
|:---|:---|
| ↑ / ↓ | 切换菜单选项 |
| Enter / Space | 确认当前选项 |
| Esc | 返回上一层 / 取消 |
| 任意键 | 跳过Logo动画 |

### 8.2 手柄操作

| 按键 | 功能 |
|:---|:---|
| 左摇杆 ↑↓ | 切换菜单选项 |
| A / × | 确认 |
| B / ○ | 返回 / 取消 |
| Start | 等同Enter |

### 8.3 鼠标操作

| 操作 | 功能 |
|:---|:---|
| 悬停 | 选中菜单项 |
| 左键点击 | 确认 |
| 右键点击 | 返回上一层 |

### 8.4 动画效果

| 元素 | 动画效果 |
|:---|:---|
| 菜单选中 | 红色底条从左侧滑入（0.2秒） |
| 菜单切换 | 文字轻微缩放（1.0 → 1.05 → 1.0） |
| 弹窗出现 | 从中心缩放+淡入（0.3秒） |
| 弹窗关闭 | 缩放+淡出（0.2秒） |
| Logo显示 | 淡入（1秒） + 停留（1秒） + 淡出（0.5秒） |

---

## 九、音效设计

### 9.1 背景音乐

| 场景 | 音乐风格 | 说明 |
|:---|:---|:---|
| 主菜单 | 爵士钢琴 + 轻柔弦乐 | 1920年代复古氛围，循环播放 |
| 设置界面 | 继续主菜单音乐 | 不切换音乐 |
| Credits | 主题曲完整版 | 滚动字幕期间播放 |

### 9.2 音效

| 交互 | 音效 |
|:---|:---|
| 菜单悬停 | 轻微打字机声 |
| 菜单确认 | 打字机回车声 |
| 弹窗出现 | 纸张展开声 |
| 弹窗关闭 | 纸张收起声 |
| 存档加载 | 档案翻阅声 |
| 错误提示 | 低沉提示音 |

---

## 十、多语言支持

### 10.1 UI文本对照表

| 英文 | 中文 |
|:---|:---|
| CONTINUE | 继续游戏 |
| NEW GAME | 新游戏 |
| CHAPTER SELECT | 章节选择 |
| ACHIEVEMENT | 成就 |
| SETTINGS | 设置 |
| DOWNLOAD | 下载 |
| CREDITS | 制作人员 |
| QUIT | 退出 |
| START NEW GAME? | 开始新游戏？ |
| RECOVER PROGRESS? | 恢复进度？ |
| SAVE CONFLICT DETECTED | 检测到存档冲突 |
| SELECT DIFFICULTY | 选择难度 |
| NORMAL MODE | 普通模式 |
| EXPERT MODE | 专家模式 |
| CANCEL | 取消 |
| CONFIRM | 确认 |
| USE THIS SAVE | 使用此存档 |
| IGNORE | 忽略 |
| RECOVER | 恢复进度 |
| COMING SOON | 敬请期待 |

---

## 十一、技术实现要点

### 11.1 存档管理器

```
SaveManager
├── Initialize()                    // 初始化存档系统
├── CheckAbnormalExit()             // 检测异常退出
├── CreateSnapshot()                // 创建快照存档
├── CreateAutoSave()                // 创建自动存档
├── CreateChapterSave()             // 创建章节存档
├── LoadSave(saveId)                // 加载指定存档
├── GetLatestSave()                 // 获取最新存档
├── GetAllChapterSaves()            // 获取所有章节存档
├── ValidateSave(saveData)          // 校验存档完整性
├── MigrateSave(oldVersion)         // 存档版本迁移
└── DeleteSave(saveId)              // 删除存档（仅调试）
```

### 11.2 云存档管理器

```
CloudSaveManager
├── Initialize()                    // 初始化Steam Cloud
├── SyncFromCloud()                 // 从云端拉取存档
├── SyncToCloud()                   // 上传存档到云端
├── CheckConflict()                 // 检测存档冲突
├── ResolveConflict(choice)         // 解决存档冲突
├── GetCloudQuotaUsage()            // 获取云存档配额使用情况
└── IsOnline()                      // 检测在线状态
```

### 11.3 主菜单控制器

```
MainMenuController
├── Initialize()                    // 初始化主菜单
├── UpdateMenuState()               // 根据存档状态更新菜单
├── OnMenuItemSelected(index)       // 菜单项选中回调
├── OnMenuItemConfirmed(index)      // 菜单项确认回调
├── ShowConfirmDialog(type)         // 显示确认弹窗
├── ShowRecoveryDialog()            // 显示恢复提示弹窗
├── ShowConflictDialog()            // 显示冲突解决弹窗
├── StartNewGame(difficulty)        // 开始新游戏
├── ContinueGame()                  // 继续游戏
└── QuitGame()                      // 退出游戏
```

### 11.4 性能指标

| 指标 | 目标值 |
|:---|:---|
| 启动到主菜单 | < 5秒（SSD）/ < 10秒（HDD） |
| 存档加载时间 | < 2秒 |
| 存档创建时间 | < 1秒 |
| 云存档同步 | < 3秒（良好网络） |
| 主菜单帧率 | 稳定60fps |

---

## 十二、测试检查清单

### 12.1 功能测试

- [ ] 无存档状态下菜单显示正确
- [ ] 有存档状态下CONTINUE显示正确
- [ ] NEW GAME流程完整
- [ ] CHAPTER SELECT正确跳转
- [ ] SETTINGS正确跳转
- [ ] QUIT确认弹窗正常
- [ ] 难度选择流程正常

### 12.2 存档测试

- [ ] 自动存档正确创建
- [ ] 章节存档正确创建
- [ ] 快照存档正确创建
- [ ] 存档加载正确恢复状态
- [ ] 存档校验功能正常
- [ ] 损坏存档正确提示

### 12.3 异常恢复测试

- [ ] 模拟崩溃后正确检测
- [ ] 恢复弹窗正确显示
- [ ] 恢复功能正确加载快照
- [ ] 忽略选项正常工作

### 12.4 云存档测试

- [ ] 在线状态同步正常
- [ ] 离线模式正常工作
- [ ] 存档冲突正确检测
- [ ] 冲突解决功能正常
- [ ] 多设备同步正常

---

## 十三、相关文档

- [设置系统_策划案](../设置系统/设置系统_策划案.md)
- [案情回顾系统_策划案](../案情回顾系统/案情回顾系统_策划案.md)
- [Steam Cloud API文档](https://partner.steamgames.com/doc/features/cloud)

---

## 十四、参考资料

在设计本系统时，参考了以下游戏和资料：

### 14.1 游戏参考

| 游戏 | 参考内容 |
|:---|:---|
| 逆转裁判系列 | 章节存档机制、通关后菜单解锁 |
| 弹丸论破系列 | 难度选择、进度回顾系统 |
| 黑神话悟空 | 多层自动存档机制（即时/小时/每日） |

### 14.2 技术参考

- [单机游戏数据自动保存方案](https://zhuanlan.zhihu.com/p/675106836)
- [游戏数据自动保存设计模式](https://blog.csdn.net/lsw_Cs/article/details/135282242)
- [Steam云存档机制](https://www.zhihu.com/question/39385118)
- [Visual Novel GUI设计](https://vndev.wiki/Graphical_User_Interface)

---

**文档状态**: ✅ v1.0 完成
**下一步**: 与程序团队确认技术实现方案，与美术团队确认视觉风格
