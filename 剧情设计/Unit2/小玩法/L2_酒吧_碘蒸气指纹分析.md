# 玩法设计文档：碘蒸气指纹分析 (Iodine Vapor Fingerprint Analysis)

**文档版本**: v1.0
**隶属章节**: Unit 2 - 循环2
**设计目标**: 通过模拟1920年代真实刑侦技术，让玩家亲手验证钞票的流通状态，将"Vinnie有大量新钞"的抽象信息转化为直观的视觉证据。

---

## 1. 玩法概述 (Overview)

*   **玩法类型**: forensic_analysis / interactive_experiment
*   **核心体验**: **道具收集** -> **实验操作** -> **结果对比** -> **生成证据**
*   **预期时长**: 60-90秒
*   **对应剧情**: Zack Brennan 对在Tony酒吧发现的可疑钞票进行科学分析，验证其是否为刚从银行取出的新钞。

### 1.1 历史背景 (Historical Context)

```
┌─────────────────────────────────────────────────────────────┐
│                  【碘蒸气显影法】                            │
│                                                             │
│  发明时间：1863年（Paul-Jean Coulier发明）                  │
│  原理：碘蒸气与皮肤油脂中的脂肪酸反应，呈现棕黄色          │
│  1920年代状态：已成为标准刑侦手段之一                       │
│                                                             │
│  设计意义：                                                  │
│  • 符合时代背景，增强沉浸感                                 │
│  • 玩家亲手操作，提升参与感                                 │
│  • 将"新钞"概念可视化                                      │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 触发条件 (Entry Trigger)

玩家需满足以下条件：

1.  **获得证据【可疑钞票】** - 在Tony酒吧Vinnie常坐的位置发现
2.  **完成初步观察** - 在证据详情界面点击[仔细观察]，发现编号连续

**触发表现**:
*   当玩家完成初步观察后，Zack 触发独白："这些钞票看起来太新了...我需要确认一下。"
*   出现选项 **[进一步检测]**
*   点击后，Emma提示："碘蒸气可以显现指纹，药店应该有碘酒卖。"
*   解锁道具收集任务

### 1.3 流程图解 (Visual Flow)

```
┌─────────────────────────────────────────────────────────────┐
│                   【玩法流程图解】                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   🟢 [开始: 获得可疑钞票]                                   │
│       ↓                                                     │
│   🔍 [初步观察: 发现编号连续、纸张很新]                     │
│       ↓                                                     │
│   💬 [Emma提示: 碘蒸气显影法]                               │
│       ↓                                                     │
│   ┌───────────────────────────────────────────────────┐     │
│   │           【道具收集阶段】                        │     │
│   │                                                   │     │
│   │   🏪 药店 → 购买【碘酒】($0.25)                  │     │
│   │   🍺 酒吧 → 找零获得【对照钞票】(旧钞)          │     │
│   │   🏠 办公室 → 已有【酒精灯】                     │     │
│   │                                                   │     │
│   │   [3件道具全部收集?] ───→ No ↺                   │     │
│   │           ↓ Yes                                   │     │
│   └───────────┼───────────────────────────────────────┘     │
│               ↓                                             │
│   🖥️ [进入实验界面: Zack办公室桌面]                        │
│               ↓                                             │
│   ┌───────────────────────────────────────────────────┐     │
│   │           【实验操作阶段】                        │     │
│   │                                                   │     │
│   │   ① 点击酒精灯 → 开始加热                        │     │
│   │   ② 等待碘酒蒸发（进度条3秒）                    │     │
│   │   ③ 拖拽【对照钞票】到蒸气上 → 指纹显现          │     │
│   │   ④ 拖拽【可疑钞票】到蒸气上 → 指纹显现          │     │
│   │                                                   │     │
│   └───────────────────────────────────────────────────┘     │
│               ↓                                             │
│   📊 [结果对比: 并排展示两张钞票]                           │
│               ↓                                             │
│   💡 [Zack得出结论: 可疑钞票几乎没经过流通]                │
│               ↓                                             │
│   🏆 [证据升级: 可疑钞票 → Vinnie的连号新钞]               │
│   🔓 [解锁Tony新对话选项]                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 2. 道具收集阶段 (Item Collection Phase)

### 2.1 道具清单

| 道具 | 获取地点 | 获取方式 | 花费 | 备注 |
|:---|:---|:---|:---:|:---|
| 【碘酒】 | 药店 | 与店员对话购买 | $0.25 | 棕色小玻璃瓶 |
| 【酒精灯】 | Zack办公室 | 已有（自动获取） | - | 常备实验器具 |
| 【对照钞票】 | Tony酒吧 | 购买任意商品获得找零 | $0.10 | 流通过的旧钞 |

### 2.2 道具收集对话

**药店 - 购买碘酒**
```
Zack："有碘酒吗？"

店员："碘酒？消毒用的？两毛五一瓶。"

Zack（掏钱）："给我来一瓶。"

店员（递过小瓶子）："受伤了？小心点。"

Zack："不是消毒...是做实验。"

店员（耸肩）："随便你，反正都是碘酒。"

【获得道具：碘酒】
```

**Tony酒吧 - 获取对照钞票**
```
Zack："给我来杯水。"

Tony："水？你确定不要点别的？"

Zack："就水。"

Tony（倒水，收钱找零）："真是的，占着座位..."

【Zack看着找零的钞票】

Zack（内心）："这张旧钞...正好可以用来对比。"

【获得道具：对照钞票（流通旧钞）】
```

### 2.3 收集完成提示

当3件道具全部收集完毕：
```
Emma："东西都齐了。回办公室做实验吧。"

【解锁：证据界面出现 [开始实验] 按钮】
```

---

## 3. 界面与交互 (UI & Interaction)

### 3.1 界面布局 (Layout)

```
┌─────────────────────────────────────────────────────────────┐
│                    【实验界面布局】                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  场景：Zack办公室，昏暗的灯光，木质办公桌                   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                      │   │
│  │   【道具区 - 左上角】          【操作区 - 中央】     │   │
│  │   ┌─────────────┐                                   │   │
│  │   │ 🧪 碘酒    │      ～～～ 蒸气 ～～～            │   │
│  │   │ 💵 对照钞票│           ∧∧∧∧∧                   │   │
│  │   │ 💵 可疑钞票│        ┌────────┐                  │   │
│  │   └─────────────┘        │ 碘酒皿 │ ← 点击倒入碘酒  │   │
│  │                          └────────┘                  │   │
│  │                        [🔥 酒精灯]                   │   │
│  │                                                      │   │
│  │   【结果展示区 - 下方】                              │   │
│  │   ┌─────────────┐    ┌─────────────┐                │   │
│  │   │  对照钞票   │    │  可疑钞票   │                │   │
│  │   │  (待检测)   │    │  (待检测)   │                │   │
│  │   └─────────────┘    └─────────────┘                │   │
│  │                                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  右下角：[❌ 退出实验]                                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 交互逻辑 (Core Loop)

#### 步骤1：准备实验

```
┌─────────────────────────────────────────────────────────────┐
│  【准备阶段】                                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. 玩家进入实验界面                                        │
│     └─ Zack独白："好，开始吧。"                            │
│                                                             │
│  2. 点击【碘酒】，拖拽到碘酒皿                              │
│     └─ 动画：碘酒倒入皿中，呈现棕红色液体                  │
│     └─ 音效：液体倾倒声                                    │
│                                                             │
│  3. 点击【酒精灯】开始加热                                  │
│     └─ 动画：火焰点燃，碘酒皿开始冒蒸气                    │
│     └─ 音效：火焰燃烧的轻微噼啪声                          │
│                                                             │
│  4. 等待蒸发（进度条，约3秒）                               │
│     └─ 进度条：从0%到100%                                  │
│     └─ 蒸气效果：从少量到浓密的紫色蒸气                    │
│     └─ Emma："碘蒸气出来了，可以开始检测了。"              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 步骤2：检测对照钞票

```
┌─────────────────────────────────────────────────────────────┐
│  【检测对照钞票】                                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  提示：拖拽【对照钞票】到蒸气上方                           │
│                                                             │
│  玩家操作：                                                  │
│  └─ 按住对照钞票，拖拽到蒸气区域                           │
│                                                             │
│  显影动画（2秒）：                                          │
│  └─ 钞票表面开始显现棕黄色斑点                             │
│  └─ 指纹逐渐浮现，密密麻麻                                 │
│  └─ 多层指纹叠加，几乎覆盖整个钞票表面                     │
│                                                             │
│  结果呈现：                                                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                      │   │
│  │         【对照钞票 - 检测完成】                      │   │
│  │                                                      │   │
│  │         ┌───────────────┐                           │   │
│  │         │ ∿∿∿∿∿∿∿∿∿∿∿ │                           │   │
│  │         │ ∿∿∿∿∿∿∿∿∿∿∿ │  ← 指纹密集               │   │
│  │         │ ∿∿∿∿∿∿∿∿∿∿∿ │    层层叠加               │   │
│  │         │ ∿∿∿∿∿∿∿∿∿∿∿ │                           │   │
│  │         └───────────────┘                           │   │
│  │                                                      │   │
│  │  Zack："流通过的钞票，经手无数人..."                │   │
│  │        "指纹叠了一层又一层。"                       │   │
│  │                                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  钞票自动归位到【结果展示区】左侧                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 步骤3：检测可疑钞票

```
┌─────────────────────────────────────────────────────────────┐
│  【检测可疑钞票】                                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  提示：拖拽【可疑钞票】到蒸气上方                           │
│                                                             │
│  玩家操作：                                                  │
│  └─ 按住可疑钞票，拖拽到蒸气区域                           │
│                                                             │
│  显影动画（2秒）：                                          │
│  └─ 钞票表面只有零星几个棕黄色斑点                         │
│  └─ 仅显现2-3枚清晰的指纹                                  │
│  └─ 大部分区域保持干净                                     │
│                                                             │
│  结果呈现：                                                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                      │   │
│  │         【可疑钞票 - 检测完成】                      │   │
│  │                                                      │   │
│  │         ┌───────────────┐                           │   │
│  │         │               │                           │   │
│  │         │      ⊙       │  ← 指纹稀少               │   │
│  │         │          ⊙   │    仅2-3枚                │   │
│  │         │     ⊙        │                           │   │
│  │         └───────────────┘                           │   │
│  │                                                      │   │
│  │  Zack："这差别也太大了..."                          │   │
│  │                                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  钞票自动归位到【结果展示区】右侧                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 4. 结果对比与结论 (Result Comparison)

### 4.1 并排对比展示

```
┌─────────────────────────────────────────────────────────────┐
│                    【结果对比画面】                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│         【对照钞票】              【可疑钞票】              │
│        ┌───────────┐            ┌───────────┐              │
│        │ ∿∿∿∿∿∿∿ │            │     ⊙     │              │
│        │ ∿∿∿∿∿∿∿ │            │         ⊙ │              │
│        │ 指纹密集  │            │ 指纹稀少  │              │
│        │ 层层叠加  │            │ 仅2-3枚   │              │
│        └───────────┘            └───────────┘              │
│                                                             │
│        来源：酒吧找零            来源：Vinnie座位           │
│        状态：正常流通            状态：几乎全新             │
│                                                             │
│  ─────────────────────────────────────────────────────      │
│                                                             │
│  【聚光灯效果：Zack的手出现，指向可疑钞票】                 │
│                                                             │
│  Zack（沉声）：                                              │
│  "正常流通的钞票经过无数人的手，指纹早就叠成一团..."       │
│  "但这几张钱上只有少量清晰指纹。"                          │
│                                                             │
│  Emma："说明这些钱几乎没经过其他人的手？"                  │
│                                                             │
│  Zack（点头）：                                              │
│  "没错——这是刚从银行出来的钱。"                           │
│  "问题是...Vinnie一个打手，哪来这么多新钞票？"             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 结论呈现

```
┌─────────────────────────────────────────────────────────────┐
│                    【实验结论】                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🔬 碘蒸气指纹分析结果                                      │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                      │   │
│  │  【对照组】流通旧钞                                  │   │
│  │   • 指纹密度：高（20+枚重叠）                        │   │
│  │   • 状态：正常流通钞票                               │   │
│  │                                                      │   │
│  │  【检测组】可疑钞票                                  │   │
│  │   • 指纹密度：极低（2-3枚）                          │   │
│  │   • 状态：几乎未经流通                               │   │
│  │   • 结论：刚从银行取出的新钞                         │   │
│  │                                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ═══════════════════════════════════════════════════════   │
│                                                             │
│  ✅ 证据升级！                                              │
│                                                             │
│  【可疑钞票】 → 【Vinnie的连号新钞】                       │
│                                                             │
│  描述更新：                                                  │
│  "经碘蒸气指纹分析确认，这些钞票几乎没有流通痕迹，         │
│   且编号连续(A7734521-A7734523)，是刚从银行取出的新钞。    │
│   一个靠打架为生的打手，哪来这么多崭新的银行钞票？"        │
│                                                             │
│  🔓 解锁Tony新对话选项：[询问钞票来源]                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 Tony后续对话（解锁）

```
┌─────────────────────────────────────────────────────────────┐
│                【解锁对话：询问Tony】                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  【新对话选项出现】：[这些钱看起来很新，Vinnie哪来的？]    │
│                                                             │
│  Zack："Tony，有件事想问你。"                              │
│                                                             │
│  Tony："什么事？"                                           │
│                                                             │
│  Zack："Vinnie那天付账的钱...你有印象吗？"                 │
│                                                             │
│  Tony（回忆）：                                              │
│  "你这么一说...那天Vinnie确实阔气得很。"                   │
│  "掏出来的钱都是崭新的，一沓一沓的..."                     │
│  "我还以为他中彩票了呢。"                                  │
│                                                             │
│  Zack："他平时也这样？"                                    │
│                                                             │
│  Tony（摇头）：                                              │
│  "哪儿啊。Vinnie平时给的都是皱巴巴的零钱。"               │
│  "那天突然阔绑了，我还挺惊讶的。"                          │
│                                                             │
│  【获得信息】：Vinnie近期突然有大量新钞票                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 5. 特殊情况处理 (Edge Case Handling)

### 5.1 道具收集不完整

*   **场景**: 玩家尝试在道具不齐全时进入实验
*   **处理逻辑**:
    *   Zack独白："还缺东西...碘酒/对照钞票还没拿到。"
    *   退出实验界面，显示当前已收集/未收集的道具清单

### 5.2 操作顺序错误

*   **场景**: 玩家未点燃酒精灯就拖拽钞票
*   **处理逻辑**:
    *   钞票弹回原位
    *   Emma提示："先把酒精灯点着，让碘酒蒸发。"

*   **场景**: 玩家未倒入碘酒就点燃酒精灯
*   **处理逻辑**:
    *   酒精灯点燃，但无蒸气产生
    *   Zack："皿里没东西...得先把碘酒倒进去。"

### 5.3 检测顺序颠倒

*   **场景**: 玩家先检测可疑钞票，再检测对照钞票
*   **处理逻辑**:
    *   **允许**。不强制顺序，但对白会调整：
    *   先检测可疑钞票时：Zack："指纹很少...但这说明什么？需要对照组。"
    *   检测对照钞票后：Zack："这才是正常钞票该有的样子...差别太明显了。"

### 5.4 玩家中途退出

*   **场景**: 玩家在实验过程中点击退出
*   **处理逻辑**:
    *   弹窗确认："实验尚未完成，确定要退出吗？"（继续/退出）
    *   若退出：进度不保存，下次需重新开始
    *   道具不消耗，可重复进行实验

### 5.5 蒸气持续时间

*   **场景**: 玩家拖拽太慢，蒸气消散
*   **处理逻辑**:
    *   蒸气持续时间：30秒
    *   15秒时警告：Emma："蒸气快没了，要抓紧。"
    *   30秒后蒸气消散：需重新点燃酒精灯（碘酒自动补充，简化流程）

### 5.6 重复实验

*   **场景**: 玩家想再做一次实验
*   **处理逻辑**:
    *   证据升级后，实验入口消失（一次性玩法）
    *   但可在证据详情中查看"分析记录"，回顾实验结果

---

## 6. 视听设计 (Audio Visual Design)

### 6.1 视觉效果

| 元素 | 描述 |
|:---|:---|
| **场景背景** | Zack办公室，昏暗灯光，聚焦在桌面实验区 |
| **碘酒颜色** | 棕红色液体，略带光泽 |
| **蒸气效果** | 紫棕色烟雾，缓缓上升，有动态飘动 |
| **指纹显现** | 从无到有的渐显动画，棕黄色斑点 |
| **对照组指纹** | 密集、重叠、杂乱（表示多人触摸） |
| **可疑钞票指纹** | 稀疏、清晰、孤立（表示少人触摸） |

### 6.2 音效设计

| 时机 | 音效 |
|:---|:---|
| 倒入碘酒 | 液体倾倒声（轻柔） |
| 点燃酒精灯 | 打火声 + 火焰燃烧噼啪声 |
| 蒸气上升 | 轻微的气流嘶嘶声 |
| 钞票靠近蒸气 | 纸张摩擦声 |
| 指纹显现 | 神秘的低频音效（类似显影声） |
| 实验完成 | 清脆的"叮"声 + 成就音效 |

---

## 7. 数据配置表 (Data Spec)

| 参数名 | 值 | 说明 |
|:---|:---|:---|
| `IODINE_COST` | 0.25 | 碘酒购买价格($) |
| `COMPARE_BILL_COST` | 0.10 | 获取对照钞票的花费($) |
| `VAPOR_DURATION` | 30s | 蒸气持续时间 |
| `VAPOR_WARNING_TIME` | 15s | 蒸气消散警告时间 |
| `HEATING_DURATION` | 3s | 加热进度条时长 |
| `FINGERPRINT_REVEAL_DURATION` | 2s | 指纹显现动画时长 |
| `CONTROL_FINGERPRINT_COUNT` | 20+ | 对照钞票指纹数量（视觉表现） |
| `SUSPECT_FINGERPRINT_COUNT` | 2-3 | 可疑钞票指纹数量（视觉表现） |
| `BILL_SERIAL_START` | A7734521 | 可疑钞票起始编号 |
| `BILL_SERIAL_END` | A7734523 | 可疑钞票结束编号 |

---

## 8. 证据链整合 (Evidence Chain)

```
┌─────────────────────────────────────────────────────────────┐
│                    【证据演化链】                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Tony暗示 → 搜索座位 → 发现钞票                            │
│      │                      │                               │
│      ▼                      ▼                               │
│  【可疑钞票】(初始状态)                                     │
│      │                                                      │
│      ▼ [仔细观察]                                           │
│  发现：编号连续、纸张很新                                   │
│      │                                                      │
│      ▼ [进一步检测]                                         │
│  收集道具 → 碘蒸气实验 → 对比结果                          │
│      │                                                      │
│      ▼                                                      │
│  【Vinnie的连号新钞】(升级证据)                            │
│      │                                                      │
│      ├─→ 解锁Tony对话 → 获得"Vinnie近期阔绑"信息          │
│      │                                                      │
│      └─→ 用于后续指证Vinnie的资金来源                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 9. 开发备注 (Dev Notes)

*   **美术资源需求**:
    *   Zack办公室桌面场景图（可复用）
    *   碘酒瓶、酒精灯、碘酒皿的2D素材
    *   蒸气粒子效果
    *   指纹贴图（密集版、稀疏版）
    *   钞票正面图（需要显示编号区域）

*   **技术要点**:
    *   拖拽交互需要碰撞检测（蒸气区域判定）
    *   指纹显现需要渐显Shader或逐帧动画
    *   蒸气效果建议用粒子系统

*   **本地化**:
    *   对白文本需支持多语言
    *   钞票面值符号需适配（$）
    *   Key示例：`GAME_MINI_IODINE_TITLE`, `GAME_MINI_IODINE_HINT_HEAT`, etc.

*   **与原设计对比**:

| 项目 | 原设计 | 新设计 |
|:---|:---|:---|
| 钞票来源 | Tony主动给 | 玩家在座位发现 |
| 验证方式 | 无（直接获得证据） | 碘蒸气实验验证 |
| 玩家参与度 | 被动接收 | 主动搜索+实验操作 |
| 证据说服力 | 弱（NPC说的） | 强（玩家亲手验证） |

---

**文档版本**: v1.0
**创建日期**: 2025-12-22
**设计依据**: Unit2_确认修改方案汇总.md - 修改方案2
**参考文档**: L3_银行_利率计算器.md
