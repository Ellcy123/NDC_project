# 美术资产可视化文档 - 按场景筛选功能说明

## 新增功能概述

已为 `Episode1_循环1_美术资产可视化.html` 添加了**按场景筛选**功能，允许用户跨循环查看同一场景在不同循环中的状态和资产。

## 功能特性

### 1. 双模式筛选

#### 模式一：按循环筛选（原有功能）
- **流程**：先选择循环 → 再选择该循环下的场景
- **显示内容**：单个循环中单个场景的详细资产
- **适用场景**：查看特定循环的完整内容

#### 模式二：按场景筛选（新增功能）✨
- **流程**：直接选择场景
- **显示内容**：该场景在所有循环中的状态和资产
- **适用场景**：
  - 对比同一场景在不同循环的变化
  - 查看某个场景的完整演变历程
  - 美术资产复用分析

### 2. 界面变化

#### 新增筛选模式选择器
```
🔍 筛选模式
├─ 按循环筛选（先选循环，再选场景）
└─ 按场景筛选（查看场景在各循环中的状态）
```

#### 按场景筛选时的显示效果
- 场景列表自动聚合所有循环中的场景名称
- 按循环分组显示该场景的不同状态
- 每个循环区块包含：
  - 循环名称标题（如：🔄 循环1：Rosa现场目击指证）
  - 该循环中场景的状态信息
  - 该场景在该循环中的所有资产（证据、人物对话、解谜）

## 使用示例

### 场景：查看"Rosa储藏室"在各循环中的变化

1. 打开文件：`Episode1_循环1_美术资产可视化.html`
2. 在"🔍 筛选模式"中选择 **"按场景筛选"**
3. 在"🏛️ 选择场景"中选择 **"Rosa储藏室"**
4. 页面将显示：
   - 循环1中的Rosa储藏室（如果存在）
   - 循环2中的Rosa储藏室（如果存在）
   - 循环3中的Rosa储藏室（如果存在）
   - ... 以此类推

### 每个循环区块显示内容：
```
🔄 循环1：Rosa现场目击指证
├─ 场景状态：Rosa不在场
├─ 探索权限：完全开放，玩家可自由搜索
├─ 证据数量：5个证据
├─ 🔍 证据资产
│   ├─ 芝加哥警局通缉令
│   ├─ Rosa的女儿照片
│   └─ ...
└─ 🧩 解谜玩法
    └─ 清洁工具箱密码锁
```

## 技术实现细节

### 核心函数

1. **loadAllScenes()** - 加载所有场景列表
   - 遍历所有循环数据
   - 收集唯一的场景名称
   - 按字母顺序排序

2. **loadSceneCrossLoop(sceneName)** - 跨循环显示场景
   - 查找包含该场景的所有循环
   - 按循环分组生成HTML
   - 保留原有的资产点击交互功能

### CSS样式

新增 `.cycle-block` 类：
- 金色边框和背景色，区分不同循环
- 悬停效果增强交互体验
- 响应式布局支持移动端

## 数据要求

为了充分利用按场景筛选功能，需要确保：
1. 多个循环中存在同名场景
2. 每个循环的数据结构包含 `循环名称` 字段
3. 场景数据结构完整（场景状态、探索权限等）

## 后续扩展建议

目前仅添加了循环1的数据，建议后续：
1. 补充循环2-6的场景和资产数据
2. 添加场景对比统计（如：该场景在X个循环中出现）
3. 支持导出场景对比报告
4. 添加场景资产变化时间线视图

## 兼容性

- ✅ 保留原有"按循环筛选"功能
- ✅ 所有原有交互功能正常工作
- ✅ 点击资产查看详情功能不受影响
- ✅ 响应式设计支持移动端和桌面端
