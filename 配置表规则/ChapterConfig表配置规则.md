# ChapterConfig表配置规则文档

## 概述

ChapterConfig表用于定义每个"游戏状态"（章节+循环组合）下可访问的场景和任务。

---

## 1. 字段说明

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | string | 是 | 游戏场景状态ID，格式：`CC` + 章节 + 循环 |
| Chapter | int | 是 | 场景状态所属章节（1-9） |
| Loop | int | 是 | 场景状态所属循环（1-6） |
| SceneID | string | 是 | 该状态下可访问的场景ID，多个用 `/` 分隔 |
| TaskID | string | 是 | 该状态下的任务ID，关联Task表的宏观ID |

---

## 2. ID命名规则

**格式：`CC` + `章节(1位)` + `循环(1位)`**

| 位置 | 含义 | 说明 |
|------|------|------|
| CC | 固定前缀 | ChapterConfig |
| 第1位 | 章节 | 1-9 = 第1-9章 |
| 第2位 | 循环 | 1-6 = 循环1-6 |

**示例：**
- `CC11` = 第1章 循环1
- `CC12` = 第1章 循环2
- `CC16` = 第1章 循环6
- `CC21` = 第2章 循环1

---

## 3. 与其他表的关系

```
┌─────────────────────────────────────────────────────────────┐
│  ChapterConfig (章节配置) - 游戏状态总控                      │
├─────────────────────────────────────────────────────────────┤
│  CC11 (第1章循环1)                                           │
│    ├─ Chapter: 1                                             │
│    ├─ Loop: 1                                                │
│    ├─ SceneID: SC101/SC102/SC103 ───→ Scene表               │
│    │                                    ├─→ Item表 (证据)    │
│    │                                    └─→ NPC表 (人物)     │
│    │                                                         │
│    └─ TaskID: Task11 ───────────────→ Task表(章节)(循环)     │
│                                         └─→ Task表(详细)     │
└─────────────────────────────────────────────────────────────┘
```

---

## 4. 配置示例

```
| ##var  | id   | Chapter | Loop | SceneID                    | TaskID |
| ##type | string | int    | int     | string                     | string |
| ##     | id   | 场景状态所属章节 | 场景状态所属循环 | 拥有场景ID         | 拥有任务系统ID |
|        | CC11 | 1       | 1       | SC101/SC102/SC103          | Task11 |
|        | CC12 | 1       | 2       | SC101/SC102/SC103/SC104    | Task12 |
|        | CC13 | 1       | 3       | SC101/SC102/SC104/SC105    | Task13 |
|        | CC14 | 1       | 4       | SC101/SC105/SC106          | Task14 |
|        | CC15 | 1       | 5       | SC101/SC105/SC106/SC107    | Task15 |
|        | CC16 | 1       | 6       | SC101/SC106/SC107/SC108    | Task16 |
```

---

## 5. 字段详细说明

### 5.1 SceneID（场景ID）

- 多个场景ID用 `/` 分隔
- 场景ID格式参考 Scene表配置规则
- 表示该章节循环下玩家可以访问的所有场景
- 随着循环推进，可访问场景可能增加或变化

**示例：**
```
SceneID: SC101/SC102/SC103
```

### 5.2 TaskID（任务ID）

- 关联 Task表(章节)(循环) 的ID
- 格式为 `Task` + 章节 + 循环（如 `Task11`）
- 决定该状态下的任务目标和进度

**示例：**
```
TaskID: Task11
```

---

## 6. 循环进度示意

```
第1章游戏流程：

CC11 (循环1) ─→ CC12 (循环2) ─→ CC13 (循环3) ─→ ...
    │              │              │
    ↓              ↓              ↓
 场景少         场景增加       场景变化
 Task11         Task12         Task13
    │              │              │
    ↓              ↓              ↓
 指证失败 ─────→ 时间重置 ─────→ 继续调查
```

---

## 7. 注意事项

1. **ID必须唯一**：每个章节循环组合只能有一条配置
2. **章节循环对应**：id中的数字必须与Chapter、Loop字段一致
3. **场景ID分隔符**：多个场景用 `/` 分隔，不要有空格
4. **TaskID格式**：必须是 `Task` + 章节 + 循环 的格式
5. **循环上限**：每章最多6个循环（1-6）

---

## 8. 更新日志

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| v1.1 | 2025-12-07 | 字段名改为英文：所属章节→Chapter、所属循环→Loop |
| v1.0 | 2025-12-07 | 初始版本 |
