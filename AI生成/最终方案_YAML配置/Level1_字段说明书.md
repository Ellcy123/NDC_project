# Level 1 å­—æ®µè¯´æ˜ä¹¦

## ğŸ“‹ æ–‡æ¡£ç”¨é€”

æœ¬æ–‡æ¡£è¯´æ˜ `Level1_Unit1_Metadata.yaml` ä¸­**å“ªäº›å­—æ®µæ˜¯ç¨‹åºå¿…è¯»çš„**ï¼Œå“ªäº›æ˜¯ç­–åˆ’å¤‡æ³¨ã€‚

---

## ğŸ¯ å­—æ®µåˆ†ç±»è§„åˆ™

| å­—æ®µç±»å‹ | æ ‡è¯† | è¯´æ˜ | ç¨‹åºæ˜¯å¦è¯»å– |
|---------|------|------|-------------|
| **ç¨‹åºå­—æ®µ** | æ— å‰ç¼€ | Unityä¼šè¯»å–å¹¶ä½¿ç”¨ | âœ… æ˜¯ |
| **ç­–åˆ’å¤‡æ³¨** | `_` å‰ç¼€ | ä»…ä¾›ç­–åˆ’ç†è§£ï¼Œç¨‹åºå¿½ç•¥ | âŒ å¦ |
| **è¡Œæ³¨é‡Š** | `#` å¼€å¤´ | çº¯æ–‡å­—è¯´æ˜ | âŒ å¦ |

**ç¤ºä¾‹**ï¼š
```yaml
scene_id: SC103           # ç¨‹åºè¯»å– âœ…
_ç­–åˆ’å¤‡æ³¨: è¿™æ˜¯ä¸»æœè¯åœºæ™¯    # ç¨‹åºå¿½ç•¥ âŒ
# è¿™æ˜¯æ³¨é‡Šè¡Œ                # ç¨‹åºå¿½ç•¥ âŒ
```

---

## ğŸ“Š Level1 å­—æ®µè¯¦è§£

### 1. åŸºç¡€ä¿¡æ¯

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `unit_id` | string | âœ… | å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç´¢å¼•å…¶ä»–é…ç½® | æ ¼å¼ï¼š`Unit{æ•°å­—}`<br>ç¤ºä¾‹ï¼š`Unit1`, `Unit2` |
| `unit_name.zh` | string | âœ… | ä¸­æ–‡ç« èŠ‚åï¼Œæ˜¾ç¤ºåœ¨UI | ç®€çŸ­æœ‰åŠ›ï¼Œ10å­—ä»¥å†… |
| `unit_name.en` | string | âœ… | è‹±æ–‡ç« èŠ‚åï¼Œæ˜¾ç¤ºåœ¨UI | è‹±æ–‡æ ‡é¢˜æ ¼å¼ |
| `unit_name_en` | string | âœ… | æ— ç‰¹æ®Šå­—ç¬¦ç‰ˆæœ¬ï¼Œç”¨äºæ–‡ä»¶å | ä¸å«å†’å·ã€ç©ºæ ¼ç­‰ç‰¹æ®Šå­—ç¬¦ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_è¯´æ˜`ï¼šå­—æ®µç”¨é€”è¯´æ˜

---

### 2. æ•…äº‹èƒŒæ™¯

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `story_background.era` | string | âœ… | æ˜¾ç¤ºåœ¨ç« èŠ‚ç®€ä»‹ | ç®€çŸ­æè¿°æ—¶ä»£èƒŒæ™¯ |
| `story_background.location` | string | âœ… | æ˜¾ç¤ºåœ¨ç« èŠ‚ç®€ä»‹ | ä¸»è¦åœ°ç‚¹åç§° |
| `story_background.historical_context` | string | âš ï¸ | å¯é€‰ï¼Œç”¨äºæ°›å›´è¥é€  | å†å²äº‹ä»¶èƒŒæ™¯ |
| `story_background.time_span` | string | âœ… | æ˜¾ç¤ºåœ¨ç« èŠ‚ä¿¡æ¯ | æ•…äº‹å‘ç”Ÿçš„æ—¶é—´è·¨åº¦ |
| `story_background.duration_minutes` | int | âœ… | æ˜¾ç¤ºé¢„ä¼°æ—¶é•¿ | é¦–æ¬¡é€šå…³é¢„ä¼°æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_ç­–åˆ’å¤‡æ³¨`ï¼šé¢å¤–è¯´æ˜

---

### 3. ä¸»é¢˜ä¸æ ¸å¿ƒè°œé¢˜

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `theme.main_theme` | string | âœ… | æ˜¾ç¤ºåœ¨ç« èŠ‚ç®€ä»‹ | ä¸€å¥è¯æ¦‚æ‹¬ä¸»é¢˜ |
| `theme.core_mystery` | string | âœ… | æ˜¾ç¤ºåœ¨ç« èŠ‚ç®€ä»‹ | æ ¸å¿ƒæ‚¬å¿µï¼Œå¸å¼•ç©å®¶ |
| `theme.emotional_hook` | string | âš ï¸ | å¯é€‰ | æƒ…æ„Ÿå¸å¼•ç‚¹ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_ç©å®¶æ„Ÿå—`ï¼šæœŸæœ›ç©å®¶ä½“éªŒ
- `_å™äº‹é‡ç‚¹`ï¼šå™äº‹è®¾è®¡è¦ç‚¹
- `_æƒ…æ„Ÿè®¾è®¡`ï¼šæƒ…æ„ŸèŠ‚å¥è®¾è®¡

---

### 4. éš¾åº¦æ¨¡å¼é…ç½®

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `difficulty_modes.normal.enabled` | bool | âœ… | æ˜¯å¦å¯ç”¨Normalæ¨¡å¼ | true/false |
| `difficulty_modes.normal.features` | array | âœ… | Normalæ¨¡å¼çš„ç‰¹æ€§åˆ—è¡¨ | å­—ç¬¦ä¸²æ•°ç»„ï¼Œæè¿°æç¤ºåŠŸèƒ½ |
| `difficulty_modes.expert.enabled` | bool | âœ… | æ˜¯å¦å¯ç”¨Expertæ¨¡å¼ | true/false |
| `difficulty_modes.expert.features` | array | âœ… | Expertæ¨¡å¼çš„ç‰¹æ€§åˆ—è¡¨ | å­—ç¬¦ä¸²æ•°ç»„ï¼Œæè¿°æŒ‘æˆ˜æ€§ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_è®¾è®¡ç›®æ ‡`ï¼šéš¾åº¦æ¨¡å¼çš„è®¾è®¡æ„å›¾

**ç¨‹åºé€»è¾‘**ï¼š
- Unityä¼šæ ¹æ® `enabled` å†³å®šæ˜¯å¦åœ¨UIæ˜¾ç¤ºè¯¥éš¾åº¦
- `features` ç”¨äºç”Ÿæˆéš¾åº¦è¯´æ˜ç•Œé¢

---

### 5. å¾ªç¯ç»“æ„æ¦‚è§ˆ

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `loop_structure.total_loops` | int | âœ… | ç« èŠ‚æ€»å¾ªç¯æ•° | æ•°å­—ï¼Œé€šå¸¸ä¸º6 |
| `loop_structure.loops[].loop_id` | string | âœ… | å¾ªç¯å”¯ä¸€ID | æ ¼å¼ï¼š`Unit{N}_Loop{M}` |
| `loop_structure.loops[].loop_number` | int | âœ… | å¾ªç¯åºå· | 1-6 |
| `loop_structure.loops[].name` | string | âœ… | å¾ªç¯åç§°ï¼Œæ˜¾ç¤ºåœ¨UI | ç®€çŸ­æ ‡é¢˜ |
| `loop_structure.loops[].objective` | string | âœ… | å¾ªç¯ç›®æ ‡ï¼Œæ˜¾ç¤ºåœ¨ä»»åŠ¡ç³»ç»Ÿ | ç–‘é—®å¥ï¼Œå¸å¼•ç©å®¶æ¢ç´¢ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_è®¾è®¡é‡ç‚¹`ï¼šæœ¬å¾ªç¯çš„è®¾è®¡æ ¸å¿ƒ
- `_é¢„ä¼°æ—¶é•¿`ï¼šé¢„è®¡é€šå…³æ—¶é—´

**ç¨‹åºé€»è¾‘**ï¼š
- Unityä¼šæ ¹æ® `total_loops` åˆå§‹åŒ–å¾ªç¯æ•°ç»„
- æ¯ä¸ª `loop_id` å¯¹åº”ä¸€ä¸ª Level2 é…ç½®æ–‡ä»¶

---

### 6. ä¸»è¦è§’è‰²åˆ—è¡¨

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `main_characters[].npc_id` | string | âœ… | NPCå”¯ä¸€ID | æ ¼å¼ï¼š`NPC{3ä½æ•°å­—}` |
| `main_characters[].name` | string | âœ… | è§’è‰²åç§°ï¼Œæ˜¾ç¤ºåœ¨UI | è§’è‰²å§“å |
| `main_characters[].role` | enum | âœ… | è§’è‰²ç±»å‹ | `protagonist`/`victim`/`suspect` |
| `main_characters[].description` | string | âœ… | è§’è‰²ç®€ä»‹ï¼Œæ˜¾ç¤ºåœ¨äººç‰©å›¾é‰´ | ç®€çŸ­æè¿°è§’è‰²èº«ä»½å’Œä½œç”¨ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_è§’è‰²å¼§å…‰`ï¼šè§’è‰²åœ¨æ•…äº‹ä¸­çš„æˆé•¿å˜åŒ–
- `_æ€§æ ¼ç‰¹ç‚¹`ï¼šè§’è‰²æ€§æ ¼æè¿°
- `_å™äº‹åŠŸèƒ½`ï¼šè§’è‰²åœ¨å™äº‹ä¸­çš„ä½œç”¨

**ç¨‹åºé€»è¾‘**ï¼š
- `npc_id` ç”¨äºå…³è”å¯¹è¯ã€è¯æ®ã€åœºæ™¯ä¸­çš„NPC
- `role` å†³å®šUIå›¾æ ‡ï¼ˆå—å®³è€…/å«Œç–‘äºº/ä¸»è§’ï¼‰

---

### 7. è¿‡åœºåŠ¨ç”»é…ç½®

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `cutscenes.opening.cutscene_id` | string | âœ… | è¿‡åœºåŠ¨ç”»ID | æ ¼å¼ï¼š`CS_Unit{N}_Opening` |
| `cutscenes.opening.scene` | string | âœ… | è¿‡åœºå‘ç”Ÿçš„åœºæ™¯ID | å…³è”åˆ°Level5çš„åœºæ™¯ |
| `cutscenes.opening.description` | string | âœ… | è¿‡åœºå†…å®¹æè¿° | ç”¨äºèµ„æºåˆ¶ä½œè¯´æ˜ |
| `cutscenes.opening.trigger` | string | âœ… | è§¦å‘æ—¶æœº | `ç« èŠ‚å¼€å§‹`/`Loopå®Œæˆ`ç­‰ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_åˆ¶ä½œéœ€æ±‚`ï¼šç¾æœ¯/æ¼”å‡ºéœ€æ±‚
- `_æ—¶é•¿`ï¼šé¢„ä¼°æ’­æ”¾æ—¶é•¿

**ç¨‹åºé€»è¾‘**ï¼š
- Unityæ ¹æ® `cutscene_id` åŠ è½½å¯¹åº”çš„è¿‡åœºèµ„æº
- `trigger` å†³å®šä½•æ—¶æ’­æ”¾

---

### 8. å™äº‹ç›®æ ‡

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `narrative_goals.immediate` | string | âš ï¸ | å¯é€‰ï¼Œç”¨äºç« èŠ‚ç®€ä»‹ | ç©å®¶çš„ç›´æ¥ç›®æ ‡ |
| `narrative_goals.hidden` | string | âš ï¸ | å¯é€‰ | éšè—çš„å™äº‹çº¿ç´¢ |
| `narrative_goals.emotional` | string | âš ï¸ | å¯é€‰ | æƒ…æ„Ÿç›®æ ‡ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_ç­–åˆ’ç›®æ ‡`ï¼šå™äº‹è®¾è®¡ç›®æ ‡

**ç¨‹åºé€»è¾‘**ï¼š
- ä¸»è¦ç”¨äºç”Ÿæˆç« èŠ‚ç®€ä»‹ç•Œé¢
- å¯é€‰å­—æ®µï¼Œä¸å½±å“æ ¸å¿ƒç©æ³•

---

### 9. ç»“å°¾Hookè®¾è®¡

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `ending_hook.revelation` | string | âš ï¸ | å¯é€‰ | ç« èŠ‚ç»“å°¾çš„é‡å¤§å‘ç° |
| `ending_hook.threat` | string | âš ï¸ | å¯é€‰ | ç« èŠ‚ç»“å°¾çš„å¨èƒ/å†²çª |
| `ending_hook.next_unit` | string | âš ï¸ | å¯é€‰ | å¼•å‘ä¸‹ä¸€ç« çš„çº¿ç´¢ |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_è®¾è®¡æ„å›¾`ï¼šHookçš„è®¾è®¡ç›®çš„

**ç¨‹åºé€»è¾‘**ï¼š
- ä¸»è¦ç”¨äºç­–åˆ’ç†è§£å™äº‹è¡”æ¥
- ç¨‹åºå¯èƒ½åœ¨ç« èŠ‚å®Œæˆç•Œé¢æ˜¾ç¤º

---

### 10. å…ƒä¿¡æ¯

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¨‹åºç”¨é€” | ç­–åˆ’å¡«å†™æŒ‡å— |
|--------|------|------|---------|-------------|
| `meta_info.version` | string | âœ… | é…ç½®ç‰ˆæœ¬å· | æ ¼å¼ï¼š`x.y` |
| `meta_info.created_date` | string | âœ… | åˆ›å»ºæ—¥æœŸ | æ ¼å¼ï¼š`YYYY-MM-DD` |
| `meta_info.author` | string | âœ… | ä½œè€… | ç­–åˆ’å›¢é˜Ÿåç§° |
| `meta_info.last_modified` | string | âœ… | æœ€åä¿®æ”¹æ—¥æœŸ | æ ¼å¼ï¼š`YYYY-MM-DD` |

**ç­–åˆ’å¤‡æ³¨å­—æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼š
- `_changelog`ï¼šå˜æ›´æ—¥å¿—

**ç¨‹åºé€»è¾‘**ï¼š
- ç”¨äºé…ç½®ç‰ˆæœ¬ç®¡ç†
- å‡ºé”™æ—¶å¯è¿½æº¯é…ç½®ç‰ˆæœ¬

---

## ğŸ”§ Unity C# è¯»å–ç¤ºä¾‹

```csharp
using UnityEngine;
using YamlDotNet.Serialization;

public class UnitMetadata
{
    // ç¨‹åºå­—æ®µ
    public string unit_id { get; set; }
    public LocalizedString unit_name { get; set; }
    public StoryBackground story_background { get; set; }
    public LoopStructure loop_structure { get; set; }

    // ç­–åˆ’å¤‡æ³¨å­—æ®µä¼šè¢«å¿½ç•¥
    // _è¯´æ˜, _ç­–åˆ’å¤‡æ³¨ ç­‰ä¸éœ€è¦å®šä¹‰
}

// è¯»å–é…ç½®
var deserializer = new DeserializerBuilder().Build();
var metadata = deserializer.Deserialize<UnitMetadata>(yamlText);

// è®¿é—®æ•°æ®
Debug.Log(metadata.unit_id);  // "Unit1"
Debug.Log(metadata.unit_name.zh);  // "è¡€è‰²é…’å§Â·æ„å¤–å·å…¥"
```

---

## âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•

### æ·»åŠ æ–°Unitæ—¶å¿…å¡«å­—æ®µ
- [ ] `unit_id`
- [ ] `unit_name.zh` å’Œ `unit_name.en`
- [ ] `story_background.era`, `location`, `time_span`, `duration_minutes`
- [ ] `theme.main_theme`, `core_mystery`
- [ ] `difficulty_modes.normal/expert.enabled` å’Œ `features`
- [ ] `loop_structure.total_loops` å’Œ `loops[]` æ•°ç»„
- [ ] `main_characters[]` è‡³å°‘åŒ…å«ä¸»è§’
- [ ] `cutscenes.opening` å’Œ `ending`
- [ ] `meta_info.version`, `created_date`, `author`, `last_modified`

### å¯é€‰å­—æ®µï¼ˆç­–åˆ’å‚è€ƒï¼‰
- [ ] æ‰€æœ‰ `_` å‰ç¼€çš„å­—æ®µ
- [ ] `narrative_goals`
- [ ] `ending_hook`

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q1: å¦‚æœæˆ‘ä¸å¡« `_ç­–åˆ’å¤‡æ³¨` ä¼šæ€æ ·ï¼Ÿ
A: å®Œå…¨æ²¡é—®é¢˜ï¼è¿™äº›å­—æ®µåªæ˜¯å¸®åŠ©ç†è§£ï¼Œç¨‹åºä¸ä¼šè¯»å–ã€‚

### Q2: æˆ‘å¯ä»¥è‡ªå®šä¹‰ `_` å‰ç¼€å­—æ®µå—ï¼Ÿ
A: å¯ä»¥ï¼ä»»ä½• `_` å¼€å¤´çš„å­—æ®µéƒ½ä¼šè¢«ç¨‹åºå¿½ç•¥ï¼Œä½ å¯ä»¥éšæ„æ·»åŠ å¤‡æ³¨ã€‚

### Q3: å¿…å¡«å­—æ®µå¿˜è®°å¡«äº†ä¼šæŠ¥é”™å—ï¼Ÿ
A: ä¼šï¼Unityè¯»å–æ—¶ä¼šæŠ¥é”™ã€‚å»ºè®®ç”¨ä¸Šé¢çš„æ£€æŸ¥æ¸…å•æ ¸å¯¹ã€‚

### Q4: å¦‚ä½•éªŒè¯æˆ‘çš„é…ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ
A:
1. ä½¿ç”¨YAMLéªŒè¯å·¥å…·æ£€æŸ¥è¯­æ³•
2. è®©AIå¸®ä½ æ£€æŸ¥å¿…å¡«å­—æ®µ
3. UnityåŠ è½½æ—¶ä¼šè‡ªåŠ¨éªŒè¯

---

## ğŸ“ ä¿®æ”¹æ—¥å¿—

- **2025-11-06**: åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºäºLevel1é…ç½®åˆ›å»º
